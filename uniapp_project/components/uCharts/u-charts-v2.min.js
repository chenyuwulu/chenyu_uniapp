'use strict';var config={version:"v2.0.0-20210406",yAxisWidth:15,yAxisSplit:5,xAxisHeight:22,xAxisLineHeight:22,legendHeight:15,yAxisTitleWidth:15,padding:[10,10,10,10],pixelRatio:1,rotate:!1,columePadding:3,fontSize:13,fontColor:"#666666",dataPointShape:["circle","circle","circle","circle"],color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],linearColor:["#0EE2F8","#2BDCA8","#FA7D8D","#EB88E2","#2AE3A0","#0EE2F8","#EB88E2","#6773E3","#F78A85"],pieChartLinePadding:15,pieChartTextPadding:5,xAxisTextPadding:3,titleColor:"#333333",titleFontSize:20,subtitleColor:"#999999",subtitleFontSize:15,toolTipPadding:3,toolTipBackground:"#000000",toolTipOpacity:.7,toolTipLineHeight:20,radarLabelTextMargin:13,gaugeLabelTextMargin:13},assign=function(e,...t){function i(e,t){for(let a in t)e[a]=e[a]&&"[object Object]"===e[a].toString()?i(e[a],t[a]):e[a]=t[a];return e}if(null==e)throw new TypeError("[uCharts] Cannot convert undefined or null to object");return!t||0>=t.length?e:(t.forEach(t=>{e=i(e,t)}),e)},util={toFixed:function(e,t){return t=t||2,this.isFloat(e)&&(e=e.toFixed(t)),e},isFloat:function(e){return 0!=e%1},approximatelyEqual:function(e,t){return 1e-10>Math.abs(e-t)},isSameSign:function(e,t){var i=Math.abs;return i(e)===e&&i(t)===t||i(e)!==e&&i(t)!==t},isSameXCoordinateArea:function(e,t){return this.isSameSign(e.x,t.x)},isCollision:function(e,t){e.end={},e.end.x=e.start.x+e.width,e.end.y=e.start.y-e.height,t.end={},t.end.x=t.start.x+t.width,t.end.y=t.start.y-t.height;var i=t.start.x>e.end.x||t.end.x<e.start.x||t.end.y>e.start.y||t.start.y<e.end.y;return!i}};function getH5Offset(t){return t.mp={changedTouches:[]},t.mp.changedTouches.push({x:t.offsetX,y:t.offsetY}),t}function lonlat2mercator(e,t){var i=Math.PI,a=[,,],o=Math.log(Math.tan((90+t)*i/360))/(i/180);return o=20037508.34*o/180,a[0]=20037508.34*e/180,a[1]=o,a}function mercator2lonlat(e,t){var i=Math.PI,a=[,,],o=180*(t/20037508.34);return o=180/i*(2*Math.atan(Math.exp(o*i/180))-i/2),a[0]=180*(e/20037508.34),a[1]=o,a}function hexToRgb(e,t){var i=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,a){return t+t+i+i+a+a}),a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),o=parseInt(a[1],16),n=parseInt(a[2],16),r=parseInt(a[3],16);return"rgba("+o+","+n+","+r+","+t+")"}function findRange(e,t,i){if(isNaN(e))throw new Error("[uCharts] series\u6570\u636E\u9700\u4E3ANumber\u683C\u5F0F");i=i||10,t=t?t:"upper";for(var a=1;1>i;)i*=10,a*=10;for(e="upper"===t?Math.ceil(e*a):Math.floor(e*a);0!=e%i;)"upper"===t?e++:e--;return e/a}function calCandleMA(e,t,i,a){let o=[];for(let n,r=0;r<e.length;r++){n={data:[],name:t[r],color:i[r]};for(let t=0,i=a.length;t<i;t++){if(t<e[r]){n.data.push(null);continue}let i=0;for(let o=0;o<e[r];o++)i+=a[t-o][1];n.data.push(+(i/e[r]).toFixed(3))}o.push(n)}return o}function calValidDistance(e,t,i,a,o){var n=o.width-o.area[1]-o.area[3],r=i.eachSpacing*(o.chartData.xAxisData.xAxisPoints.length-1),l=t;return 0<=t?(l=0,e.uevent.trigger("scrollLeft"),e.scrollOption.position="left",o.xAxis.scrollPosition="left"):Math.abs(t)>=r-n?(l=n-r,e.uevent.trigger("scrollRight"),e.scrollOption.position="right",o.xAxis.scrollPosition="right"):(e.scrollOption.position=t,o.xAxis.scrollPosition=t),l}function isInAngleRange(e,t,i){function a(e){for(;0>e;)e+=2*o;for(;e>2*o;)e-=2*o;return e}var o=Math.PI;return e=a(e),t=a(t),i=a(i),t>i&&(i+=2*o,e<t&&(e+=2*o)),e>=t&&e<=i}function calRotateTranslate(e,t,i){var a=e,o=i-t,n=a+(i-o-a)/1.4142135623730951;n*=-1;return{transX:n,transY:(i-o)*(1.4142135623730951-1)-(i-o-a)/1.4142135623730951}}function createCurveControlPoints(e,t){function i(e,t){return!!(e[t-1]&&e[t+1])&&(e[t].y>=r(e[t-1].y,e[t+1].y)||e[t].y<=n(e[t-1].y,e[t+1].y))}function o(e,t){return!!(e[t-1]&&e[t+1])&&(e[t].x>=r(e[t-1].x,e[t+1].x)||e[t].x<=n(e[t-1].x,e[t+1].x))}var n=Math.min,r=Math.max,l=.2,a=.2,s=null,d=null,x=null,h=null;if(1>t?(s=e[0].x+(e[1].x-e[0].x)*l,d=e[0].y+(e[1].y-e[0].y)*l):(s=e[t].x+(e[t+1].x-e[t-1].x)*l,d=e[t].y+(e[t+1].y-e[t-1].y)*l),t>e.length-3){var c=e.length-1;x=e[c].x-(e[c].x-e[c-1].x)*a,h=e[c].y-(e[c].y-e[c-1].y)*a}else x=e[t+1].x-(e[t+2].x-e[t].x)*a,h=e[t+1].y-(e[t+2].y-e[t].y)*a;return i(e,t+1)&&(h=e[t+1].y),i(e,t)&&(d=e[t].y),o(e,t+1)&&(x=e[t+1].x),o(e,t)&&(s=e[t].x),(d>=r(e[t].y,e[t+1].y)||d<=n(e[t].y,e[t+1].y))&&(d=e[t].y),(h>=r(e[t].y,e[t+1].y)||h<=n(e[t].y,e[t+1].y))&&(h=e[t+1].y),(s>=r(e[t].x,e[t+1].x)||s<=n(e[t].x,e[t+1].x))&&(s=e[t].x),(x>=r(e[t].x,e[t+1].x)||x<=n(e[t].x,e[t+1].x))&&(x=e[t+1].x),{ctrA:{x:s,y:d},ctrB:{x:x,y:h}}}function convertCoordinateOrigin(e,t,i){return{x:i.x+e,y:i.y-t}}function avoidCollision(e,t){if(t)for(;util.isCollision(e,t);)0<e.start.x?e.start.y--:0>e.start.x?e.start.y++:0<e.start.y?e.start.y++:e.start.y--;return e}function fixPieSeries(e,t){let a=[];if(-1<e[0].data.constructor.toString().indexOf("Array")){t._pieSeries_=e;let i=e[0].data;for(var o=0;o<i.length;o++)e[0].formatter?a.push({name:i[o].name,data:i[o].value,formatter:e[0].formatter}):a.push({name:i[o].name,data:i[o].value});t.series=a}else a=e;return a}function fillSeries(e,t,a){for(var o=0,n=0;n<e.length;n++){let i=e[n];if(i.color||(i.color=a.color[o],o=(o+1)%a.color.length),i.linearIndex||(i.linearIndex=n),i.index||(i.index=0),i.type||(i.type=t.type),"undefined"==typeof i.show&&(i.show=!0),i.type||(i.type=t.type),i.pointShape||(i.pointShape="circle"),!i.legendShape)switch(i.type){case"line":i.legendShape="line";break;case"column":i.legendShape="rect";break;case"area":i.legendShape="triangle";break;default:i.legendShape="circle";}}return e}function fillCustomColor(e,t,a,o){var n=t||[];if("custom"==e&&0==n.length&&(n=o.linearColor),"custom"==e&&n.length<a.length){let e=a.length-n.length;for(var r=0;r<e;r++)n.push(o.linearColor[(r+1)%o.linearColor.length])}return n}function getDataRange(e,t){var i=0,a=t-e;return i=1e4<=a?1e3:1e3<=a?100:100<=a?10:10<=a?5:1<=a?1:.1<=a?.1:.01<=a?.01:.001<=a?.001:1e-4<=a?1e-4:1e-5<=a?1e-5:1e-6,{minRange:findRange(e,"lower",i),maxRange:findRange(t,"upper",i)}}function measureText(e,t,i){var a=0;if(e+="",!1!==i&&void 0!==i)return i.setFontSize(t),i.measureText(e).width;var e=e.split("");for(let o,n=0;n<e.length;n++)o=e[n],a+=/[a-zA-Z]/.test(o)?7:/[0-9]/.test(o)?5.5:/\./.test(o)?2.7:/-/.test(o)?3.25:/[\u4e00-\u9fa5]/.test(o)?10:/\(|\)/.test(o)?3.73:/\s/.test(o)?2.5:/%/.test(o)?8:10;return a*t/10}function dataCombine(e){return e.reduce(function(e,t){return(e.data?e.data:e).concat(t.data)},[])}function dataCombineStack(e,t){for(var o=Array(t),a=0;a<o.length;a++)o[a]=0;for(var n=0;n<e.length;n++)for(var a=0;a<o.length;a++)o[a]+=e[n].data[a];return e.reduce(function(e,t){return(e.data?e.data:e).concat(t.data).concat(o)},[])}function getTouches(t,i,a){let e,o;return t.clientX?i.rotate?(o=i.height-t.clientX*i.pix,e=(t.pageY-a.currentTarget.offsetTop-i.height/i.pix/2*(i.pix-1))*i.pix):(e=t.clientX*i.pix,o=(t.pageY-a.currentTarget.offsetTop-i.height/i.pix/2*(i.pix-1))*i.pix):i.rotate?(o=i.height-t.x*i.pix,e=t.y*i.pix):(e=t.x*i.pix,o=t.y*i.pix),{x:e,y:o}}function getSeriesDataItem(e,t){var i=[];for(let a,o=0;o<e.length;o++)if(a=e[o],null!==a.data[t]&&"undefined"!=typeof a.data[t]&&a.show){let e={};e.color=a.color,e.type=a.type,e.style=a.style,e.pointShape=a.pointShape,e.disableLegend=a.disableLegend,e.name=a.name,e.show=a.show,e.data=a.formatter?a.formatter(a.data[t]):a.data[t],i.push(e)}return i}function getMaxTextListLength(e,t,i){var a=e.map(function(e){return measureText(e,t,i)});return Math.max.apply(null,a)}function getRadarCoordinateSeries(e){for(var t=Math.PI,a=[],o=0;o<e;o++)a.push(2*t/e*o);return a.map(function(e){return-1*e+t/2})}function getToolTipData(e,t,a,i){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},n=t.chartData.calPoints?t.chartData.calPoints:[],r=e.map(function(e){let n=[];return n=i?i:e.data,{text:o.formatter?o.formatter(e,n[a],a,t):e.name+": "+e.data,color:e.color}}),l=[],s={x:0,y:0};for(let o,r=0;r<n.length;r++)o=n[r],"undefined"!=typeof o[a]&&null!==o[a]&&l.push(o[a]);for(let o,n=0;n<l.length;n++)o=l[n],s.x=Math.round(o.x),s.y+=o.y;return s.y/=l.length,{textList:r,offset:s}}function getMixToolTipData(e,t,a,i){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},n=t.chartData.calPoints,r=e.map(function(e){return{text:o.formatter?o.formatter(e,i[a],a,t):e.name+": "+e.data,color:e.color,disableLegend:!!e.disableLegend}});r=r.filter(function(e){if(!0!==e.disableLegend)return e});var l=[],s={x:0,y:0};for(let o,r=0;r<n.length;r++)o=n[r],"undefined"!=typeof o[a]&&null!==o[a]&&l.push(o[a]);for(let o,n=0;n<l.length;n++)o=l[n],s.x=Math.round(o.x),s.y+=o.y;return s.y/=l.length,{textList:r,offset:s}}function getCandleToolTipData(e,t,i,a,o,n){var r=6<arguments.length&&void 0!==arguments[6]?arguments[6]:{},l=i.chartData.calPoints;let s=n.color.upFill,d=n.color.downFill,x=[s,s,d,s];var h=[];let c={text:o[a],color:null};h.push(c),t.map(function(t){0==a?0>t.data[1]-t.data[0]?x[1]=d:x[1]=s:(t.data[0]<e[a-1][1]&&(x[0]=d),t.data[1]<t.data[0]&&(x[1]=d),t.data[2]>e[a-1][1]&&(x[2]=s),t.data[3]<e[a-1][1]&&(x[3]=d));let i={text:"\u5F00\u76D8\uFF1A"+t.data[0],color:x[0]},o={text:"\u6536\u76D8\uFF1A"+t.data[1],color:x[1]},n={text:"\u6700\u4F4E\uFF1A"+t.data[2],color:x[2]},r={text:"\u6700\u9AD8\uFF1A"+t.data[3],color:x[3]};h.push(i,o,n,r)});var p=[],g={x:0,y:0};for(let r,s=0;s<l.length;s++)r=l[s],"undefined"!=typeof r[a]&&null!==r[a]&&p.push(r[a]);return g.x=Math.round(p[0][0].x),{textList:h,offset:g}}function filterSeries(e){let t=[];for(let a=0;a<e.length;a++)!0==e[a].show&&t.push(e[a]);return t}function findCurrentIndex(e,t,a,i){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,n=-1,r=a.chartData.eachSpacing/2;let l=[];if(t&&0<t.length){for(let e=1;e<a.chartData.xAxisPoints.length;e++)l.push(a.chartData.xAxisPoints[e]-r);("line"==a.type||"area"==a.type)&&"justify"==a.xAxis.boundaryGap&&(l=a.chartData.xAxisPoints),a.categories||(r=0),isInExactChartArea(e,a,i)&&l.forEach(function(t,i){e.x+o+r>t&&(n=i)})}return n}function findLegendIndex(e,t){let i=-1,a=0;if(isInExactLegendArea(e,t.area)){let o=t.points,n=-1;for(let t,r=0,l=o.length;r<l;r++){t=o[r];for(let o=0;o<t.length;o++){n+=1;let r=t[o].area;if(r&&e.x>r[0]-a&&e.x<r[2]+a&&e.y>r[1]-a&&e.y<r[3]+a){i=n;break}}}return i}return i}function isInExactLegendArea(e,t){return e.x>t.start.x&&e.x<t.end.x&&e.y>t.start.y&&e.y<t.end.y}function isInExactChartArea(e,t){return e.x<=t.width-t.area[1]+10&&e.x>=t.area[3]-10&&e.y>=t.area[0]&&e.y<=t.height-t.area[2]}function findRadarChartCurrentIndex(e,t,i){var a=Math.PI,o=2*a/i,n=-1;if(isInExactPieChartArea(e,t.center,t.radius)){var r=function(e){return 0>e&&(e+=2*a),e>2*a&&(e-=2*a),e},l=Math.atan2(t.center.y-e.y,e.x-t.center.x);l=-1*l,0>l&&(l+=2*a);var s=t.angleList.map(function(e){return e=r(-1*e),e});s.forEach(function(e,t){var i=r(e-o/2),s=r(e+o/2);s<i&&(s+=2*a),(l>=i&&l<=s||l+2*a>=i&&l+2*a<=s)&&(n=t)})}return n}function findFunnelChartCurrentIndex(e,t){for(var a,o=-1,n=0,r=t.series.length;n<r;n++)if(a=t.series[n],e.x>a.funnelArea[0]&&e.x<a.funnelArea[2]&&e.y>a.funnelArea[1]&&e.y<a.funnelArea[3]){o=n;break}return o}function findWordChartCurrentIndex(e,t){for(var a,o=-1,n=0,r=t.length;n<r;n++)if(a=t[n],e.x>a.area[0]&&e.x<a.area[2]&&e.y>a.area[1]&&e.y<a.area[3]){o=n;break}return o}function findMapChartCurrentIndex(e,t){for(var a,o=-1,n=t.chartData.mapData,r=t.series,l=pointToCoordinate(e.y,e.x,n.bounds,n.scale,n.xoffset,n.yoffset),s=[l.x,l.y],d=0,x=r.length;d<x;d++)if(a=r[d].geometry.coordinates,isPoiWithinPoly(s,a,t.chartData.mapData.mercator)){o=d;break}return o}function findPieChartCurrentIndex(e,t){var a=-1;if(t&&t.center&&isInExactPieChartArea(e,t.center,t.radius)){var o=Math.atan2(t.center.y-e.y,e.x-t.center.x);o=-o;for(var n,r=0,l=t.series.length;r<l;r++)if(n=t.series[r],isInAngleRange(o,n._start_,n._start_+2*n._proportion_*Math.PI)){a=r;break}}return a}function isInExactPieChartArea(e,t,i){var a=Math.pow;return a(e.x-t.x,2)+a(e.y-t.y,2)<=a(i,2)}function splitPoints(e){var t=[],i=[];return e.forEach(function(e){null===e?(i.length&&t.push(i),i=[]):i.push(e)}),i.length&&t.push(i),t}function calLegendData(e,t,i,a,o){var n=Math.max,r=Math.floor;let l={area:{start:{x:0,y:0},end:{x:0,y:0},width:0,height:0,wholeWidth:0,wholeHeight:0},points:[],widthArr:[],heightArr:[]};if(!1===t.legend.show)return a.legendData=l,l;let s=t.legend.padding*t.pix,d=t.legend.margin*t.pix,x=t.legend.fontSize*t.pix,h=15*t.pix,c=5*t.pix,p=n(t.legend.lineHeight*t.pix,x);if("top"==t.legend.position||"bottom"==t.legend.position){let a=[],r=0,g=[],y=[];for(let n=0;n<e.length;n++){let i=e[n],l=h+c+measureText(i.name||"undefined",x,o)+t.legend.itemGap*t.pix;r+l>t.width-t.area[1]-t.area[3]?(a.push(y),g.push(r-t.legend.itemGap*t.pix),r=l,y=[i]):(r+=l,y.push(i))}if(y.length){a.push(y),g.push(r-t.legend.itemGap*t.pix),l.widthArr=g;let e=n.apply(null,g);switch(t.legend.float){case"left":l.area.start.x=t.area[3],l.area.end.x=t.area[3]+e+2*s;break;case"right":l.area.start.x=t.width-t.area[1]-e-2*s,l.area.end.x=t.width-t.area[1];break;default:l.area.start.x=(t.width-e)/2-s,l.area.end.x=(t.width+e)/2+s;}l.area.width=e+2*s,l.area.wholeWidth=e+2*s,l.area.height=a.length*p+2*s,l.area.wholeHeight=a.length*p+2*s+2*d,l.points=a}}else{let i=e.length,a=t.height-t.area[0]-t.area[2]-2*d-2*s,n=Math.min(r(a/p),i);switch(l.area.height=n*p+2*s,l.area.wholeHeight=n*p+2*s,t.legend.float){case"top":l.area.start.y=t.area[0]+d,l.area.end.y=t.area[0]+d+l.area.height;break;case"bottom":l.area.start.y=t.height-t.area[2]-d-l.area.height,l.area.end.y=t.height-t.area[2]-d;break;default:l.area.start.y=(t.height-l.area.height)/2,l.area.end.y=(t.height+l.area.height)/2;}let g=0==i%n?i/n:r(i/n+1),y=[];for(let t,a=0;a<g;a++)t=e.slice(a*n,a*n+n),y.push(t);if(l.points=y,y.length){for(let e=0;e<y.length;e++){let i=y[e],a=0;for(let e,n=0;n<i.length;n++)e=h+c+measureText(i[n].name||"undefined",x,o)+t.legend.itemGap*t.pix,e>a&&(a=e);l.widthArr.push(a),l.heightArr.push(i.length*p+2*s)}let e=0;for(let t=0;t<l.widthArr.length;t++)e+=l.widthArr[t];l.area.width=e-t.legend.itemGap*t.pix+2*s,l.area.wholeWidth=l.area.width+s}}switch(t.legend.position){case"top":l.area.start.y=t.area[0]+d,l.area.end.y=t.area[0]+d+l.area.height;break;case"bottom":l.area.start.y=t.height-t.area[2]-l.area.height-d,l.area.end.y=t.height-t.area[2]-d;break;case"left":l.area.start.x=t.area[3],l.area.end.x=t.area[3]+l.area.width;break;case"right":l.area.start.x=t.width-t.area[1]-l.area.width,l.area.end.x=t.width-t.area[1];}return a.legendData=l,l}function calCategoriesData(e,t,i,a,o){var n={angle:0,xAxisHeight:i.xAxisHeight},r=e.map(function(e){return measureText(e,t.xAxis.fontSize||i.fontSize,o)}),l=Math.max.apply(this,r);return!0==t.xAxis.rotateLabel&&l+2*i.xAxisTextPadding>a&&(n.angle=45*Math.PI/180,n.xAxisHeight=2*i.xAxisTextPadding+l*Math.sin(n.angle)),n}function getXAxisTextList(e,t){var a=Math.min,o=Math.max,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:-1,r=dataCombine(e),l=[];r=r.filter(function(e){return"object"==typeof e&&null!==e?-1<e.constructor.toString().indexOf("Array")?null!==e:null!==e.value:null!==e}),r.map(function(e){"object"==typeof e?-1<e.constructor.toString().indexOf("Array")?"candle"==t.type?e.map(function(e){l.push(e)}):l.push(e[0]):l.push(e.value):l.push(e)});var s=0,d=0;if(0<l.length&&(s=a.apply(this,l),d=o.apply(this,l)),-1<n?("number"==typeof t.xAxis.data[n].min&&(s=a(t.xAxis.data[n].min,s)),"number"==typeof t.xAxis.data[n].max&&(d=o(t.xAxis.data[n].max,d))):("number"==typeof t.xAxis.min&&(s=a(t.xAxis.min,s)),"number"==typeof t.xAxis.max&&(d=o(t.xAxis.max,d))),s===d){var x=d||10;d+=x}for(var h=s,c=d,p=[],g=(c-h)/t.xAxis.splitNumber,y=0;y<=t.xAxis.splitNumber;y++)p.push(h+g*y);return p}function calXAxisData(e,t,i,a){var o={angle:0,xAxisHeight:i.xAxisHeight};o.ranges=getXAxisTextList(e,t,i),o.rangesFormat=o.ranges.map(function(e){return e=t.xAxis.formatter?t.xAxis.formatter(e):util.toFixed(e,2),e});var n=o.ranges.map(function(e){return e=util.toFixed(e,2),e=t.xAxis.formatter?t.xAxis.formatter(+e):e,e});o=Object.assign(o,getXAxisPoints(n,t,i));var r=o.eachSpacing,l=n.map(function(e){return measureText(e,i.fontSize,a)}),s=Math.max.apply(this,l);return s+2*i.xAxisTextPadding>r&&(o.angle=45*Math.PI/180,o.xAxisHeight=2*i.xAxisTextPadding+s*Math.sin(o.angle)),!0===t.xAxis.disabled&&(o.xAxisHeight=0),o}function getRadarDataPoints(e,t,i,a,o){var n=Math.max,r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:1,l=o.extra.radar||{};l.max=l.max||0;var s=n(l.max,n.apply(null,dataCombine(a))),d=[];for(let n=0;n<a.length;n++){let o=a[n],l={};l.color=o.color,l.legendShape=o.legendShape,l.pointShape=o.pointShape,l.data=[],o.data.forEach(function(a,o){let n={};n.angle=e[o],n.proportion=a/s,n.position=convertCoordinateOrigin(i*n.proportion*r*Math.cos(n.angle),i*n.proportion*r*Math.sin(n.angle),t),l.data.push(n)}),d.push(l)}return d}function getPieDataPoints(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,o=0,n=0;for(let a,n=0;n<e.length;n++)a=e[n],a.data=null===a.data?0:a.data,o+=a.data;for(let n,r=0;r<e.length;r++)n=e[r],n.data=null===n.data?0:n.data,n._proportion_=0===o?1/e.length*a:n.data/o*a,n._radius_=t;for(let a,o=0;o<e.length;o++)a=e[o],a._start_=n,n+=2*a._proportion_*Math.PI;return e}function getFunnelDataPoints(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1;e=e.sort(function(e,t){return parseInt(t.data)-parseInt(e.data)});for(let o=0;o<e.length;o++)e[o].radius=e[o].data/e[0].data*t*a,e[o]._proportion_=e[o].data/e[0].data;return e.reverse()}function getRoseDataPoints(e,t,a,o){var n=4<arguments.length&&arguments[4]!==void 0?arguments[4]:1,r=0,l=0,s=[];for(let n,l=0;l<e.length;l++)n=e[l],n.data=null===n.data?0:n.data,r+=n.data,s.push(n.data);var d=Math.min.apply(null,s),x=Math.max.apply(null,s);for(let l,s=0;s<e.length;s++)l=e[s],l.data=null===l.data?0:l.data,0===r||"area"==t?(l._proportion_=l.data/r*n,l._rose_proportion_=1/e.length*n):(l._proportion_=l.data/r*n,l._rose_proportion_=l.data/r*n),l._radius_=a+(o-a)*((l.data-d)/(x-d));for(let n,r=0;r<e.length;r++)n=e[r],n._start_=l,l+=2*n._rose_proportion_*Math.PI;return e}function getArcbarDataPoints(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1;1==a&&(a=.999999);for(let o,n=0;n<e.length;n++){o=e[n],o.data=null===o.data?0:o.data;let i;i="circle"==t.type?2:t.endAngle<t.startAngle?2+t.endAngle-t.startAngle:t.startAngle-t.endAngle,o._proportion_=i*o.data*a+t.startAngle,2<=o._proportion_&&(o._proportion_%=2)}return e}function getGaugeAxisPoints(e,t,a){let o=t;for(let n=0;n<e.length;n++)e[n].value=null===e[n].value?0:e[n].value,e[n]._startAngle_=o,e[n]._endAngle_=(t-a+1)*e[n].value+t,2<=e[n]._endAngle_&&(e[n]._endAngle_%=2),o=e[n]._endAngle_;return e}function getGaugeDataPoints(e,t,a){let o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1;for(let n,r=0;r<e.length;r++){if(n=e[r],n.data=null===n.data?0:n.data,"auto"==a.pointer.color){for(let e=0;e<t.length;e++)if(n.data<=t[e].value){n.color=t[e].color;break}}else n.color=a.pointer.color;let i=a.startAngle-a.endAngle+1;n._endAngle_=i*n.data+a.startAngle,n._oldAngle_=a.oldAngle,a.oldAngle<a.endAngle&&(n._oldAngle_+=2),n._proportion_=n.data>=a.oldData?(n._endAngle_-n._oldAngle_)*o+a.oldAngle:n._oldAngle_-(n._oldAngle_-n._endAngle_)*o,2<=n._proportion_&&(n._proportion_%=2)}return e}function getPieTextMaxLength(e,t,a){e=getPieDataPoints(e);let o=0;for(let n=0;n<e.length;n++){let i=e[n],r=i.formatter?i.formatter(+i._proportion_.toFixed(2)):util.toFixed(100*i._proportion_)+"%";o=Math.max(o,measureText(r,t.fontSize,a))}return o}function fixColumeData(e,t,i,a,o,n){var r=Math.min;return e.map(function(e){if(null===e)return null;var l=0;return l="mix"==n.type?n.extra.mix.column.seriesGap||0:n.extra.column.seriesGap||0,e.width=Math.ceil((t-2*o.columePadding-l*(i-1))/i),n.extra.mix&&n.extra.mix.column.width&&0<+n.extra.mix.column.width&&(e.width=r(e.width,+n.extra.mix.column.width*n.pix)),n.extra.column&&n.extra.column.width&&0<+n.extra.column.width&&(e.width=r(e.width,+n.extra.column.width*n.pix)),0>=e.width&&(e.width=1),e.x+=(a+.5-i/2)*(e.width+l),e})}function fixColumeMeterData(e,t,i,a,o,n,r){return e.map(function(e){return null===e?null:(e.width=Math.ceil((t-2*o.columePadding)/2),n.extra.column&&n.extra.column.width&&0<+n.extra.column.width&&(e.width=Math.min(e.width,+n.extra.column.width)),0<a&&(e.width-=2*r),e)})}function fixColumeStackData(e,t,i,a,o,n){return e.map(function(e){return null===e?null:(e.width=Math.ceil((t-2*o.columePadding)/2),n.extra.column&&n.extra.column.width&&0<+n.extra.column.width&&(e.width=Math.min(e.width,+n.extra.column.width)),e)})}function getXAxisPoints(e,t){var i=t.width-t.area[1]-t.area[3],a=t.enableScroll?Math.min(t.xAxis.itemCount,e.length):e.length;("line"==t.type||"area"==t.type)&&1<a&&"justify"==t.xAxis.boundaryGap&&(a-=1);var o=i/a,n=[],r=t.area[3],l=t.width-t.area[1];return e.forEach(function(e,t){n.push(r+t*o)}),"justify"!==t.xAxis.boundaryGap&&(!0===t.enableScroll?n.push(r+e.length*o):n.push(l)),{xAxisPoints:n,startX:r,endX:l,eachSpacing:o}}function getCandleDataPoints(e,t,i,a,o,n){var r=Math.round,l=7<arguments.length&&void 0!==arguments[7]?arguments[7]:1,s=[],d=n.height-n.area[0]-n.area[2];return e.forEach(function(e,x){if(null===e)s.push(null);else{var h=[];e.forEach(function(e){var s={x:a[x]+r(o/2)},c=e.value||e,p=d*(c-t)/(i-t);p*=l,s.y=n.height-r(p)-n.area[2],h.push(s)}),s.push(h)}}),s}function getDataPoints(e,t,i,a,o,n){var r=Math.round,l=7<arguments.length&&void 0!==arguments[7]?arguments[7]:1,s="center";("line"==n.type||"area"==n.type)&&(s=n.xAxis.boundaryGap);var d=[],x=n.height-n.area[0]-n.area[2],h=n.width-n.area[1]-n.area[3];return e.forEach(function(e,c){if(null===e)d.push(null);else{var p={color:e.color,x:a[c]},g=e;if("object"==typeof e&&null!==e)if(-1<e.constructor.toString().indexOf("Array")){let t,i,a;t=[].concat(n.chartData.xAxisData.ranges),i=t.shift(),a=t.pop(),g=e[1],p.x=n.area[3]+h*(e[0]-i)/(a-i)}else g=e.value;"center"==s&&(p.x+=r(o/2));var y=x*(g-t)/(i-t);y*=l,p.y=n.height-r(y)-n.area[2],d.push(p)}}),d}function getStackDataPoints(e,t,i,a,o,n,r,l,s){var d=Math.round,x=9<arguments.length&&void 0!==arguments[9]?arguments[9]:1,h=[],c=n.height-n.area[0]-n.area[2];return e.forEach(function(e,r){if(null===e)h.push(null);else{var p={color:e.color,x:a[r]+d(o/2)};if(0<l){var g=0;for(let e=0;e<=l;e++)g+=s[e].data[r];var y=g-e,u=c*(g-t)/(i-t),f=c*(y-t)/(i-t)}else var g=e,u=c*(g-t)/(i-t),f=0;var m=f;u*=x,m*=x,p.y=n.height-d(u)-n.area[2],p.y0=n.height-d(m)-n.area[2],h.push(p)}}),h}function getYAxisTextList(e,t,a,o){var n,r=Math.min,l=Math.max,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:-1;n="stack"==o?dataCombineStack(e,t.categories.length):dataCombine(e);var d=[];n=n.filter(function(e){return"object"==typeof e&&null!==e?-1<e.constructor.toString().indexOf("Array")?null!==e:null!==e.value:null!==e}),n.map(function(e){"object"==typeof e?-1<e.constructor.toString().indexOf("Array")?"candle"==t.type?e.map(function(e){d.push(e)}):d.push(e[1]):d.push(e.value):d.push(e)});var x=0,h=0;if(0<d.length&&(x=r.apply(this,d),h=l.apply(this,d)),-1<s?("number"==typeof t.yAxis.data[s].min&&(x=r(t.yAxis.data[s].min,x)),"number"==typeof t.yAxis.data[s].max&&(h=l(t.yAxis.data[s].max,h))):("number"==typeof t.yAxis.min&&(x=r(t.yAxis.min,x)),"number"==typeof t.yAxis.max&&(h=l(t.yAxis.max,h))),x===h){var c=h||10;h+=c}for(var p=getDataRange(x,h),g=p.minRange,y=p.maxRange,u=[],f=(y-g)/t.yAxis.splitNumber,m=0;m<=t.yAxis.splitNumber;m++)u.push(g+f*m);return u.reverse()}function calYAxisData(e,t,a,o){var n=Math.max,r=assign({},{type:""},t.extra.column),l=t.yAxis.data.length,s=Array(l);if(0<l){for(let t=0;t<l;t++){s[t]=[];for(let i=0;i<e.length;i++)e[i].index==t&&s[t].push(e[i])}var d=Array(l),x=Array(l),h=Array(l);for(let e,c=0;c<l;c++){e=t.yAxis.data[c],!0==t.yAxis.disabled&&(e.disabled=!0),d[c]=getYAxisTextList(s[c],t,a,r.type,c);let i=e.fontSize||a.fontSize;h[c]={position:e.position?e.position:"left",width:0},x[c]=d[c].map(function(t){return t=util.toFixed(t,6),t=e.formatter?e.formatter(+t):t,h[c].width=n(h[c].width,measureText(t,i,o)+5),t});let l=e.calibration?4*t.pix:0;h[c].width+=l+3*t.pix,!0===e.disabled&&(h[c].width=0)}}else{var d=[,],x=[,],h=[,];d[0]=getYAxisTextList(e,t,a,r.type),h[0]={position:"left",width:0};var i=t.yAxis.fontSize||a.fontSize;x[0]=d[0].map(function(e){return e=util.toFixed(e,6),e=t.yAxis.formatter?t.yAxis.formatter(+e):e,h[0].width=n(h[0].width,measureText(e,i,o)+5),e}),h[0].width+=3*t.pix,!0===t.yAxis.disabled?(h[0]={position:"left",width:0},t.yAxis.data[0]={disabled:!0}):t.yAxis.data[0]={disabled:!1,position:"left",max:t.yAxis.max,min:t.yAxis.min,format:t.yAxis.formatter}}return{rangesFormat:x,ranges:d,yAxisWidth:h}}function calTooltipYAxisData(e,t,a){let o=[].concat(a.chartData.yAxisData.ranges),n=a.height-a.area[0]-a.area[2],r=a.area[0],l=[];for(let s=0;s<o.length;s++){let t=o[s].shift(),i=o[s].pop(),d=t-(t-i)*(e-r)/n;d=a.yAxis.data[s].formatter?a.yAxis.data[s].formatter(+d):d.toFixed(0),l.push(d+"")}return l}function calMarkLineData(e,t){let a,o,n=t.height-t.area[0]-t.area[2];for(let r=0;r<e.length;r++){e[r].yAxisIndex=e[r].yAxisIndex?e[r].yAxisIndex:0;let i=[].concat(t.chartData.yAxisData.ranges[e[r].yAxisIndex]);a=i.pop(),o=i.shift();let l=n*(e[r].value-a)/(o-a);e[r].y=t.height-Math.round(l)-t.area[2]}return e}function contextRotate(e,t){var i=Math.PI;!0===t.rotateLock?!0!==t._rotate_&&(e.translate(t.height,0),e.rotate(90*i/180),t._rotate_=!0):(e.translate(t.height,0),e.rotate(90*i/180))}function drawPointShape(e,t,i,a,o){if(a.beginPath(),"hollow"==o.dataPointShapeType?(a.setStrokeStyle(t),a.setFillStyle(o.background),a.setLineWidth(2*o.pix)):(a.setStrokeStyle("#ffffff"),a.setFillStyle(t),a.setLineWidth(1*o.pix)),"diamond"===i)e.forEach(function(e){null!==e&&(a.moveTo(e.x,e.y-4.5),a.lineTo(e.x-4.5,e.y),a.lineTo(e.x,e.y+4.5),a.lineTo(e.x+4.5,e.y),a.lineTo(e.x,e.y-4.5))});else if("circle"===i)e.forEach(function(e){null!==e&&(a.moveTo(e.x+2.5*o.pix,e.y),a.arc(e.x,e.y,3*o.pix,0,2*Math.PI,!1))});else if("square"===i)e.forEach(function(e){null!==e&&(a.moveTo(e.x-3.5,e.y-3.5),a.rect(e.x-3.5,e.y-3.5,7,7))});else if("triangle"===i)e.forEach(function(e){null!==e&&(a.moveTo(e.x,e.y-4.5),a.lineTo(e.x-4.5,e.y+4.5),a.lineTo(e.x+4.5,e.y+4.5),a.lineTo(e.x,e.y-4.5))});else if("triangle"===i)return;a.closePath(),a.fill(),a.stroke()}function drawRingTitle(e,t,i,a){var o=e.title.fontSize||t.titleFontSize,n=e.subtitle.fontSize||t.subtitleFontSize,r=e.title.name||"",l=e.subtitle.name||"",s=e.title.color||e.fontColor,d=e.subtitle.color||e.fontColor,x=r?o:0,h=l?n:0,c=5;if(l){var p=measureText(l,n*e.pix,i),g=a.x-p/2+(e.subtitle.offsetX||0)*e.pix,y=a.y+n*e.pix/2+(e.subtitle.offsetY||0)*e.pix;r&&(y+=(x*e.pix+c)/2),i.beginPath(),i.setFontSize(n*e.pix),i.setFillStyle(d),i.fillText(l,g,y),i.closePath(),i.stroke()}if(r){var u=measureText(r,o*e.pix,i),f=a.x-u/2+(e.title.offsetX||0),m=a.y+o*e.pix/2+(e.title.offsetY||0)*e.pix;l&&(m-=(h*e.pix+c)/2),i.beginPath(),i.setFontSize(o*e.pix),i.setFillStyle(s),i.fillText(r,f,m),i.closePath(),i.stroke()}}function drawPointText(e,t,i,a){var o=t.data,n=t.textOffset?t.textOffset:0;e.forEach(function(e,r){if(null!==e){a.beginPath(),a.setFontSize(t.textSize||i.fontSize),a.setFillStyle(t.textColor||i.fontColor);var l=o[r];"object"==typeof o[r]&&null!==o[r]&&(o[r].constructor==Array?l=o[r][1]:l=o[r].value);var s=t.formatter?t.formatter(l):l;a.setTextAlign("center"),a.fillText(s+"",e.x,e.y-4+n),a.closePath(),a.stroke(),a.setTextAlign("left")}})}function drawGaugeLabel(e,t,i,a,o,n){var r=Math.PI;t-=e.width/2+o.gaugeLabelTextMargin;let l=e.startAngle-e.endAngle+1,s=l/e.splitLine.splitNumber,d=e.endNumber-e.startNumber,x=d/e.splitLine.splitNumber,h=e.startAngle,c=e.startNumber;for(let l=0;l<e.splitLine.splitNumber+1;l++){var p={x:t*Math.cos(h*r),y:t*Math.sin(h*r)},g=e.formatter?e.formatter(c):c;p.x+=i.x-measureText(g,o.fontSize,n)/2,p.y+=i.y;var y=p.x,u=p.y;n.beginPath(),n.setFontSize(o.fontSize),n.setFillStyle(e.labelColor||a.fontColor),n.fillText(g,y,u+o.fontSize/2),n.closePath(),n.stroke(),h+=s,2<=h&&(h%=2),c+=x}}function drawRadarLabel(e,t,i,a,o,n){var r=a.extra.radar||{};t+=o.radarLabelTextMargin*a.pix,e.forEach(function(e,l){var s={x:t*Math.cos(e),y:t*Math.sin(e)},d=convertCoordinateOrigin(s.x,s.y,i),x=d.x,h=d.y;util.approximatelyEqual(s.x,0)?x-=measureText(a.categories[l]||"",o.fontSize,n)/2:0>s.x&&(x-=measureText(a.categories[l]||"",o.fontSize,n)),n.beginPath(),n.setFontSize(o.fontSize),n.setFillStyle(r.labelColor||a.fontColor),n.fillText(a.categories[l]||"",x,h+o.fontSize/2),n.closePath(),n.stroke()})}function drawPieText(e,t,a,o,i,n){var r=Math.cos,l=Math.sin,s=Math.min,d=Math.max,x=Math.PI,h=a.pieChartLinePadding,c=[],p=null,g=e.map(function(e,t,i){var a=e.formatter?e.formatter(e,t,i):util.toFixed(100*e._proportion_.toFixed(4))+"%";e._rose_proportion_&&(e._proportion_=e._rose_proportion_);var o=2*x-(e._start_+2*x*e._proportion_/2),n=e.color,r=e._radius_;return{arc:o,text:a,color:n,radius:r,textColor:e.textColor,textSize:e.textSize}});for(let x=0;x<g.length;x++){let e=g[x],t=r(e.arc)*(e.radius+h),i=l(e.arc)*(e.radius+h),n=r(e.arc)*e.radius,y=l(e.arc)*e.radius,u=0<=t?t+a.pieChartTextPadding:t-a.pieChartTextPadding,f=i,m=measureText(e.text,e.textSize||a.fontSize,o),S=f;p&&util.isSameXCoordinateArea(p.start,{x:u})&&(0<u?S=s(f,p.start.y):0>t?S=d(f,p.start.y):0<f?S=d(f,p.start.y):S=s(f,p.start.y)),0>u&&(u-=m);let A={lineStart:{x:n,y:y},lineEnd:{x:t,y:i},start:{x:u,y:S},width:m,height:a.fontSize,text:e.text,color:e.color,textColor:e.textColor,textSize:e.textSize};p=avoidCollision(A,p),c.push(p)}for(let r=0;r<c.length;r++){let e=c[r],i=convertCoordinateOrigin(e.lineStart.x,e.lineStart.y,n),l=convertCoordinateOrigin(e.lineEnd.x,e.lineEnd.y,n),s=convertCoordinateOrigin(e.start.x,e.start.y,n);o.setLineWidth(1*t.pix),o.setFontSize(a.fontSize),o.beginPath(),o.setStrokeStyle(e.color),o.setFillStyle(e.color),o.moveTo(i.x,i.y);let d=0>e.start.x?s.x+e.width:s.x,h=0>e.start.x?s.x-5:s.x+5;o.quadraticCurveTo(l.x,l.y,d,s.y),o.moveTo(i.x,i.y),o.stroke(),o.closePath(),o.beginPath(),o.moveTo(s.x+e.width,s.y),o.arc(d,s.y,2,0,2*x),o.closePath(),o.fill(),o.beginPath(),o.setFontSize(e.textSize||a.fontSize),o.setFillStyle(e.textColor||t.fontColor),o.fillText(e.text,h,s.y+3),o.closePath(),o.stroke(),o.closePath()}}function drawToolTipSplitLine(e,t,i,a){var o=t.extra.tooltip||{};o.gridType=null==o.gridType?"solid":o.gridType,o.dashLength=null==o.dashLength?4:o.dashLength;var n=t.area[0],r=t.height-t.area[2];if("dash"==o.gridType&&a.setLineDash([o.dashLength,o.dashLength]),a.setStrokeStyle(o.gridColor||"#cccccc"),a.setLineWidth(1*t.pix),a.beginPath(),a.moveTo(e,n),a.lineTo(e,r),a.stroke(),a.setLineDash([]),o.xAxisLabel){let n=t.categories[t.tooltip.index];a.setFontSize(i.fontSize);let l=measureText(n,i.fontSize,a),s=e-.5*l,d=r;a.beginPath(),a.setFillStyle(hexToRgb(o.labelBgColor||i.toolTipBackground,o.labelBgOpacity||i.toolTipOpacity)),a.setStrokeStyle(o.labelBgColor||i.toolTipBackground),a.setLineWidth(1*t.pix),a.rect(s-i.toolTipPadding,d,l+2*i.toolTipPadding,i.fontSize+2*i.toolTipPadding),a.closePath(),a.stroke(),a.fill(),a.beginPath(),a.setFontSize(i.fontSize),a.setFillStyle(o.labelFontColor||t.fontColor),a.fillText(n+"",s,d+i.toolTipPadding+i.fontSize),a.closePath(),a.stroke()}}function drawMarkLine(e,t,a){let o=assign({},{type:"solid",dashLength:4,data:[]},e.extra.markLine),n=e.area[3],r=e.width-e.area[1],l=calMarkLineData(o.data,e);for(let s,d=0;d<l.length;d++)if(s=assign({},{lineColor:"#DE4A42",showLabel:!1,labelFontColor:"#666666",labelBgColor:"#DFE8FF",labelBgOpacity:.8,yAxisIndex:0},l[d]),"dash"==o.type&&a.setLineDash([o.dashLength,o.dashLength]),a.setStrokeStyle(s.lineColor),a.setLineWidth(1*e.pix),a.beginPath(),a.moveTo(n,s.y),a.lineTo(r,s.y),a.stroke(),a.setLineDash([]),s.showLabel){let i=e.yAxis.formatter?e.yAxis.formatter(+s.value):s.value;a.setFontSize(t.fontSize);let o=measureText(i,t.fontSize,a),n=e.chartData.yAxisData.yAxisWidth[0].width,r=e.area[3]-o-2*t.toolTipPadding,l=e.area[3],d=l-t.toolTipPadding,x=s.y;a.setFillStyle(hexToRgb(s.labelBgColor,s.labelBgOpacity)),a.setStrokeStyle(s.labelBgColor),a.setLineWidth(1*e.pix),a.beginPath(),a.rect(r,x-.5*t.fontSize-t.toolTipPadding,l-r,t.fontSize+2*t.toolTipPadding),a.closePath(),a.stroke(),a.fill(),a.setFontSize(t.fontSize),a.setTextAlign("right"),a.setFillStyle(s.labelFontColor),a.fillText(i+"",d,x+.5*t.fontSize),a.stroke(),a.setTextAlign("left")}}function drawToolTipHorizentalLine(e,t,a,i){var o=Math.max,n=assign({},{gridType:"solid",dashLength:4},e.extra.tooltip),r=e.area[3],l=e.width-e.area[1];if("dash"==n.gridType&&a.setLineDash([n.dashLength,n.dashLength]),a.setStrokeStyle(n.gridColor||"#cccccc"),a.setLineWidth(1*e.pix),a.beginPath(),a.moveTo(r,e.tooltip.offset.y),a.lineTo(l,e.tooltip.offset.y),a.stroke(),a.setLineDash([]),n.yAxisLabel){let r=calTooltipYAxisData(e.tooltip.offset.y,e.series,e,t,i),l=e.chartData.yAxisData.yAxisWidth,s=e.area[3],d=e.width-e.area[1];for(let x=0;x<r.length;x++){a.setFontSize(t.fontSize);let i,h,c,p=measureText(r[x],t.fontSize,a);"left"==l[x].position?(i=s-l[x].width,h=o(i,i+p+2*t.toolTipPadding)):(i=d,h=o(i+l[x].width,i+p+2*t.toolTipPadding)),c=h-i;let g=i+(c-p)/2,y=e.tooltip.offset.y;a.beginPath(),a.setFillStyle(hexToRgb(n.labelBgColor||t.toolTipBackground,n.labelBgOpacity||t.toolTipOpacity)),a.setStrokeStyle(n.labelBgColor||t.toolTipBackground),a.setLineWidth(1*e.pix),a.rect(i,y-.5*t.fontSize-t.toolTipPadding,c,t.fontSize+2*t.toolTipPadding),a.closePath(),a.stroke(),a.fill(),a.beginPath(),a.setFontSize(t.fontSize),a.setFillStyle(n.labelFontColor||e.fontColor),a.fillText(r[x],g,y+.5*t.fontSize),a.closePath(),a.stroke(),"left"==l[x].position?s-=l[x].width+e.yAxis.padding*e.pix:d+=l[x].width+e.yAxis.padding*e.pix}}}function drawToolTipSplitArea(e,t,i,a,o){var n=assign({},{activeBgColor:"#000000",activeBgOpacity:.08},t.extra.column),r=t.area[0],l=t.height-t.area[2];a.beginPath(),a.setFillStyle(hexToRgb(n.activeBgColor,n.activeBgOpacity)),a.rect(e-o/2,r,o,l-r),a.closePath(),a.fill()}function drawToolTip(e,t,i,a,o){var n=Math.round,r=Math.PI,l=assign({},{showBox:!0,showArrow:!0,bgColor:"#000000",bgOpacity:.7,borderColor:"#000000",borderWidth:0,borderRadius:0,borderOpacity:.7,fontColor:"#FFFFFF",splitLine:!0},i.extra.tooltip),s=4*i.pix,d=5*i.pix,x=l.showArrow?8*i.pix:0,h=!1;("line"==i.type||"area"==i.type||"candle"==i.type||"mix"==i.type)&&!0==l.splitLine&&drawToolTipSplitLine(i.tooltip.offset.x,i,a,o),t=assign({x:0,y:0},t),t.y-=8*i.pix;var c=e.map(function(e){return measureText(e.text,a.fontSize,o)}),p=s+d+4*a.toolTipPadding+Math.max.apply(null,c),g=2*a.toolTipPadding+e.length*a.toolTipLineHeight;if(!1!=l.showBox){t.x-Math.abs(i._scrollDistance_)+x+p>i.width&&(h=!0),g+t.y>i.height&&(t.y=i.height-g),o.beginPath(),o.setFillStyle(hexToRgb(l.bgColor||a.toolTipBackground,l.bgOpacity||a.toolTipOpacity)),o.setLineWidth(l.borderWidth*i.pix),o.setStrokeStyle(hexToRgb(l.borderColor,l.borderOpacity));var y=l.borderRadius;h?(l.showArrow&&(o.moveTo(t.x,t.y+10*i.pix),o.lineTo(t.x-x,t.y+10*i.pix+5*i.pix)),o.arc(t.x-x-y,t.y+g-y,y,0,r/2,!1),o.arc(t.x-x-n(p)+y,t.y+g-y,y,r/2,Math.PI,!1),o.arc(t.x-x-n(p)+y,t.y+y,y,-r,-r/2,!1),o.arc(t.x-x-y,t.y+y,y,-r/2,0,!1),l.showArrow&&(o.lineTo(t.x-x,t.y+10*i.pix-5*i.pix),o.lineTo(t.x,t.y+10*i.pix))):(l.showArrow&&(o.moveTo(t.x,t.y+10*i.pix),o.lineTo(t.x+x,t.y+10*i.pix-5*i.pix)),o.arc(t.x+x+y,t.y+y,y,-r,-r/2,!1),o.arc(t.x+x+n(p)-y,t.y+y,y,-r/2,0,!1),o.arc(t.x+x+n(p)-y,t.y+g-y,y,0,r/2,!1),o.arc(t.x+x+y,t.y+g-y,y,r/2,Math.PI,!1),l.showArrow&&(o.lineTo(t.x+x,t.y+10*i.pix+5*i.pix),o.lineTo(t.x,t.y+10*i.pix))),o.closePath(),o.fill(),0<l.borderWidth&&o.stroke(),e.forEach(function(e,i){if(null!==e.color){o.beginPath(),o.setFillStyle(e.color);var n=t.x+x+2*a.toolTipPadding,r=t.y+(a.toolTipLineHeight-a.fontSize)/2+a.toolTipLineHeight*i+a.toolTipPadding+1;h&&(n=t.x-p-x+2*a.toolTipPadding),o.fillRect(n,r,s,a.fontSize),o.closePath()}}),e.forEach(function(e,i){var n=t.x+x+2*a.toolTipPadding+s+d;h&&(n=t.x-p-x+2*a.toolTipPadding+ +s+d);var r=t.y+(a.toolTipLineHeight-a.fontSize)/2+a.toolTipLineHeight*i+a.toolTipPadding;o.beginPath(),o.setFontSize(a.fontSize),o.setFillStyle(l.fontColor),o.fillText(e.text,n,r+a.fontSize),o.closePath(),o.stroke()})}}function drawColumnDataPoints(e,t,i,a){var o=Math.PI;let n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,r=t.chartData.xAxisData,l=r.xAxisPoints,s=r.eachSpacing,d=assign({},{type:"group",width:s/2,meterBorder:4,meterFillColor:"#FFFFFF",barBorderCircle:!1,barBorderRadius:[],seriesGap:2,linearType:"none",linearOpacity:1,customColor:[],colorStop:0},t.extra.column),x=[];a.save();let h=-2,c=l.length+2;return t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&(a.translate(t._scrollDistance_,0),h=Math.floor(-t._scrollDistance_/s)-2,c=h+t.xAxis.itemCount+4),t.tooltip&&t.tooltip.textList&&t.tooltip.textList.length&&1===n&&drawToolTipSplitArea(t.tooltip.offset.x,t,i,a,s),d.customColor=fillCustomColor(d.linearType,d.customColor,e,i),e.forEach(function(r,p){let g,y,u;g=[].concat(t.chartData.yAxisData.ranges[r.index]),y=g.pop(),u=g.shift();var f=r.data;switch(d.type){case"group":var m=getDataPoints(f,y,u,l,s,t,i,n),S=getStackDataPoints(f,y,u,l,s,t,i,p,e,n);x.push(S),m=fixColumeData(m,s,e.length,p,i,t);for(let e,n=0;n<m.length;n++)if(e=m[n],null!==e&&n>h&&n<c){var A=e.x-e.width/2,T=t.height-e.y-t.area[2];a.beginPath();var b=e.color||r.color,P=e.color||r.color;if("none"!==d.linearType){var w=a.createLinearGradient(A,e.y,A,t.height-t.area[2]);"opacity"==d.linearType?(w.addColorStop(0,hexToRgb(b,d.linearOpacity)),w.addColorStop(1,hexToRgb(b,1))):(w.addColorStop(0,hexToRgb(d.customColor[r.linearIndex],d.linearOpacity)),w.addColorStop(d.colorStop,hexToRgb(d.customColor[r.linearIndex],d.linearOpacity)),w.addColorStop(1,hexToRgb(b,1))),b=w}if(d.barBorderRadius&&4===d.barBorderRadius.length||!0===d.barBorderCircle){const i=A,n=e.y,r=e.width,l=t.height-t.area[2]-e.y;d.barBorderCircle&&(d.barBorderRadius=[r/2,r/2,0,0]);let[s,x,h,c]=d.barBorderRadius;s+h>l&&(s=l,h=0,x=l,c=0),s+h>r/2&&(s=r/2,h=0,x=r/2,c=0),s=0>s?0:s,x=0>x?0:x,h=0>h?0:h,c=0>c?0:c,a.arc(i+s,n+s,s,-o,-o/2),a.arc(i+r-x,n+x,x,-o/2,0),a.arc(i+r-h,n+l-h,h,0,o/2),a.arc(i+c,n+l-c,c,o/2,Math.PI)}else a.moveTo(A,e.y),a.lineTo(A+e.width-2,e.y),a.lineTo(A+e.width-2,t.height-t.area[2]),a.lineTo(A,t.height-t.area[2]),a.lineTo(A,e.y),a.setLineWidth(1),a.setStrokeStyle(P);a.setFillStyle(b),a.closePath(),a.fill()};break;case"stack":var m=getStackDataPoints(f,y,u,l,s,t,i,p,e,n);x.push(m),m=fixColumeStackData(m,s,e.length,p,i,t,e);for(let e,o=0;o<m.length;o++)if(e=m[o],null!==e&&o>h&&o<c){a.beginPath();var b=e.color||r.color,A=e.x-e.width/2+1,T=t.height-e.y-t.area[2],C=t.height-e.y0-t.area[2];0<p&&(T-=C),a.setFillStyle(b),a.moveTo(A,e.y),a.fillRect(A,e.y,e.width-2,T),a.closePath(),a.fill()};break;case"meter":var m=getDataPoints(f,y,u,l,s,t,i,n);if(x.push(m),m=fixColumeMeterData(m,s,e.length,p,i,t,d.meterBorder),0==p){for(let e,o=0;o<m.length;o++)if(e=m[o],null!==e&&o>h&&o<c){a.beginPath(),a.setFillStyle(d.meterFillColor);var A=e.x-e.width/2,T=t.height-e.y-t.area[2];a.moveTo(A,e.y),a.fillRect(A,e.y,e.width,T),a.closePath(),a.fill(),0<d.meterBorder&&(a.beginPath(),a.setStrokeStyle(r.color),a.setLineWidth(d.meterBorder*t.pix),a.moveTo(A+.5*d.meterBorder,e.y+T),a.lineTo(A+.5*d.meterBorder,e.y+.5*d.meterBorder),a.lineTo(A+e.width-.5*d.meterBorder,e.y+.5*d.meterBorder),a.lineTo(A+e.width-.5*d.meterBorder,e.y+T),a.stroke())}}else for(let e,o=0;o<m.length;o++)if(e=m[o],null!==e&&o>h&&o<c){a.beginPath(),a.setFillStyle(e.color||r.color);var A=e.x-e.width/2,T=t.height-e.y-t.area[2];a.moveTo(A,e.y),a.fillRect(A,e.y,e.width,T),a.closePath(),a.fill()}}}),!1!==t.dataLabel&&1===n&&e.forEach(function(o,r){let x,h,c;x=[].concat(t.chartData.yAxisData.ranges[o.index]),h=x.pop(),c=x.shift();var p=o.data;switch(d.type){case"group":var g=getDataPoints(p,h,c,l,s,t,i,n);g=fixColumeData(g,s,e.length,r,i,t),drawPointText(g,o,i,a);break;case"stack":var g=getStackDataPoints(p,h,c,l,s,t,i,r,e,n);drawPointText(g,o,i,a);break;case"meter":var g=getDataPoints(p,h,c,l,s,t,i,n);drawPointText(g,o,i,a);}}),a.restore(),{xAxisPoints:l,calPoints:x,eachSpacing:s}}function drawCandleDataPoints(e,t,a,i,o){var n=5<arguments.length&&void 0!==arguments[5]?arguments[5]:1,r=assign({},{color:{},average:{}},a.extra.candle);r.color=assign({},{upLine:"#f04864",upFill:"#f04864",downLine:"#2fc25b",downFill:"#2fc25b"},r.color),r.average=assign({},{show:!1,name:[],day:[],color:i.color},r.average),a.extra.candle=r;let l=a.chartData.xAxisData,s=l.xAxisPoints,d=l.eachSpacing,x=[];o.save();let h=-2,c=s.length+2,p=0,g=a.width+d;return a._scrollDistance_&&0!==a._scrollDistance_&&!0===a.enableScroll&&(o.translate(a._scrollDistance_,0),h=Math.floor(-a._scrollDistance_/d)-2,c=h+a.xAxis.itemCount+4,p=-a._scrollDistance_-2*d+a.area[3],g=p+(a.xAxis.itemCount+4)*d),(r.average.show||t)&&t.forEach(function(e){let t,r,l;t=[].concat(a.chartData.yAxisData.ranges[e.index]),r=t.pop(),l=t.shift();var x=e.data,h=getDataPoints(x,r,l,s,d,a,i,n),c=splitPoints(h);for(let t,a=0;a<c.length;a++){if(t=c[a],o.beginPath(),o.setStrokeStyle(e.color),o.setLineWidth(1),1===t.length)o.moveTo(t[0].x,t[0].y),o.arc(t[0].x,t[0].y,1,0,2*Math.PI);else{o.moveTo(t[0].x,t[0].y);let e=0;for(let i,a=0;a<t.length;a++)if(i=t[a],0==e&&i.x>p&&(o.moveTo(i.x,i.y),e=1),0<a&&i.x>p&&i.x<g){var y=createCurveControlPoints(t,a-1);o.bezierCurveTo(y.ctrA.x,y.ctrA.y,y.ctrB.x,y.ctrB.y,i.x,i.y)}o.moveTo(t[0].x,t[0].y)}o.closePath(),o.stroke()}}),e.forEach(function(e){let t,l,p;t=[].concat(a.chartData.yAxisData.ranges[e.index]),l=t.pop(),p=t.shift();var g=e.data,y=getCandleDataPoints(g,l,p,s,d,a,i,n);x.push(y);var u=splitPoints(y);for(let t=0;t<u[0].length;t++)if(t>h&&t<c){let e=u[0][t];o.beginPath(),0<g[t][1]-g[t][0]?(o.setStrokeStyle(r.color.upLine),o.setFillStyle(r.color.upFill),o.setLineWidth(1*a.pix),o.moveTo(e[3].x,e[3].y),o.lineTo(e[1].x,e[1].y),o.lineTo(e[1].x-d/4,e[1].y),o.lineTo(e[0].x-d/4,e[0].y),o.lineTo(e[0].x,e[0].y),o.lineTo(e[2].x,e[2].y),o.lineTo(e[0].x,e[0].y),o.lineTo(e[0].x+d/4,e[0].y),o.lineTo(e[1].x+d/4,e[1].y),o.lineTo(e[1].x,e[1].y),o.moveTo(e[3].x,e[3].y)):(o.setStrokeStyle(r.color.downLine),o.setFillStyle(r.color.downFill),o.setLineWidth(1*a.pix),o.moveTo(e[3].x,e[3].y),o.lineTo(e[0].x,e[0].y),o.lineTo(e[0].x-d/4,e[0].y),o.lineTo(e[1].x-d/4,e[1].y),o.lineTo(e[1].x,e[1].y),o.lineTo(e[2].x,e[2].y),o.lineTo(e[1].x,e[1].y),o.lineTo(e[1].x+d/4,e[1].y),o.lineTo(e[0].x+d/4,e[0].y),o.lineTo(e[0].x,e[0].y),o.moveTo(e[3].x,e[3].y)),o.closePath(),o.fill(),o.stroke()}}),o.restore(),{xAxisPoints:s,calPoints:x,eachSpacing:d}}function drawAreaDataPoints(e,t,i,a){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,n=assign({},{type:"straight",opacity:.2,addLine:!1,width:2,gradient:!1},t.extra.area);let r=t.chartData.xAxisData,l=r.xAxisPoints,s=r.eachSpacing,d=t.height-t.area[2],x=[];a.save();let h=0,c=t.width+s;return t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&(a.translate(t._scrollDistance_,0),h=-t._scrollDistance_-2*s+t.area[3],c=h+(t.xAxis.itemCount+4)*s),e.forEach(function(e){let r,p,g;r=[].concat(t.chartData.yAxisData.ranges[e.index]),p=r.pop(),g=r.shift();let y=e.data,u=getDataPoints(y,p,g,l,s,t,i,o);x.push(u);let f=splitPoints(u);for(let o,r=0;r<f.length;r++){if(o=f[r],a.beginPath(),a.setStrokeStyle(hexToRgb(e.color,n.opacity)),n.gradient){let i=a.createLinearGradient(0,t.area[0],0,t.height-t.area[2]);i.addColorStop("0",hexToRgb(e.color,n.opacity)),i.addColorStop("1.0",hexToRgb("#FFFFFF",.1)),a.setFillStyle(i)}else a.setFillStyle(hexToRgb(e.color,n.opacity));if(a.setLineWidth(n.width*t.pix),1<o.length){let e=o[0],t=o[o.length-1];a.moveTo(e.x,e.y);let i=0;if("curve"===n.type){for(let e,t=0;t<o.length;t++)if(e=o[t],0==i&&e.x>h&&(a.moveTo(e.x,e.y),i=1),0<t&&e.x>h&&e.x<c){let i=createCurveControlPoints(o,t-1);a.bezierCurveTo(i.ctrA.x,i.ctrA.y,i.ctrB.x,i.ctrB.y,e.x,e.y)}}else for(let e,t=0;t<o.length;t++)e=o[t],0==i&&e.x>h&&(a.moveTo(e.x,e.y),i=1),0<t&&e.x>h&&e.x<c&&a.lineTo(e.x,e.y);a.lineTo(t.x,d),a.lineTo(e.x,d),a.lineTo(e.x,e.y)}else{let e=o[0];a.moveTo(e.x-s/2,e.y),a.lineTo(e.x+s/2,e.y),a.lineTo(e.x+s/2,d),a.lineTo(e.x-s/2,d),a.moveTo(e.x-s/2,e.y)}if(a.closePath(),a.fill(),n.addLine){if("dash"==e.lineType){let i=e.dashLength?e.dashLength:8;i*=t.pix,a.setLineDash([i,i])}if(a.beginPath(),a.setStrokeStyle(e.color),a.setLineWidth(n.width*t.pix),1===o.length)a.moveTo(o[0].x,o[0].y),a.arc(o[0].x,o[0].y,1,0,2*Math.PI);else{a.moveTo(o[0].x,o[0].y);let e=0;if("curve"===n.type){for(let t,i=0;i<o.length;i++)if(t=o[i],0==e&&t.x>h&&(a.moveTo(t.x,t.y),e=1),0<i&&t.x>h&&t.x<c){let e=createCurveControlPoints(o,i-1);a.bezierCurveTo(e.ctrA.x,e.ctrA.y,e.ctrB.x,e.ctrB.y,t.x,t.y)}}else for(let t,i=0;i<o.length;i++)t=o[i],0==e&&t.x>h&&(a.moveTo(t.x,t.y),e=1),0<i&&t.x>h&&t.x<c&&a.lineTo(t.x,t.y);a.moveTo(o[0].x,o[0].y)}a.stroke(),a.setLineDash([])}}!1!==t.dataPointShape&&drawPointShape(u,e.color,e.pointShape,a,t)}),!1!==t.dataLabel&&1===o&&e.forEach(function(e){let n,r,d;n=[].concat(t.chartData.yAxisData.ranges[e.index]),r=n.pop(),d=n.shift();var x=e.data,h=getDataPoints(x,r,d,l,s,t,i,o);drawPointText(h,e,i,a)}),a.restore(),{xAxisPoints:l,calPoints:x,eachSpacing:s}}function drawLineDataPoints(e,t,i,a){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,n=assign({},{type:"straight",width:2},t.extra.line);n.width*=t.pix;let r=t.chartData.xAxisData,l=r.xAxisPoints,s=r.eachSpacing;var d=[];a.save();let x=0,h=t.width+s;return t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&(a.translate(t._scrollDistance_,0),x=-t._scrollDistance_-2*s+t.area[3],h=x+(t.xAxis.itemCount+4)*s),e.forEach(function(e){let r,c,p;r=[].concat(t.chartData.yAxisData.ranges[e.index]),c=r.pop(),p=r.shift();var g=e.data,y=getDataPoints(g,c,p,l,s,t,i,o);d.push(y);var u=splitPoints(y);if("dash"==e.lineType){let i=e.dashLength?e.dashLength:8;i*=t.pix,a.setLineDash([i,i])}a.beginPath(),a.setStrokeStyle(e.color),a.setLineWidth(n.width),u.forEach(function(e){if(1===e.length)a.moveTo(e[0].x,e[0].y),a.arc(e[0].x,e[0].y,1,0,2*Math.PI);else{a.moveTo(e[0].x,e[0].y);let i=0;if("curve"===n.type)for(let o,n=0;n<e.length;n++)if(o=e[n],0==i&&o.x>x&&(a.moveTo(o.x,o.y),i=1),0<n&&o.x>x&&o.x<h){var t=createCurveControlPoints(e,n-1);a.bezierCurveTo(t.ctrA.x,t.ctrA.y,t.ctrB.x,t.ctrB.y,o.x,o.y)}if("straight"===n.type)for(let t,o=0;o<e.length;o++)t=e[o],0==i&&t.x>x&&(a.moveTo(t.x,t.y),i=1),0<o&&t.x>x&&t.x<h&&a.lineTo(t.x,t.y);if("step"===n.type)for(let t,o=0;o<e.length;o++)t=e[o],0==i&&t.x>x&&(a.moveTo(t.x,t.y),i=1),0<o&&t.x>x&&t.x<h&&(a.lineTo(t.x,e[o-1].y),a.lineTo(t.x,t.y));a.moveTo(e[0].x,e[0].y)}}),a.stroke(),a.setLineDash([]),!1!==t.dataPointShape&&drawPointShape(y,e.color,e.pointShape,a,t)}),!1!==t.dataLabel&&1===o&&e.forEach(function(e){let n,r,d;n=[].concat(t.chartData.yAxisData.ranges[e.index]),r=n.pop(),d=n.shift();var x=e.data,h=getDataPoints(x,r,d,l,s,t,i,o);drawPointText(h,e,i,a)}),a.restore(),{xAxisPoints:l,calPoints:d,eachSpacing:s}}function drawMixDataPoints(e,t,i,a){var o=Math.PI;let n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,r=assign({},{width:d/2,barBorderCircle:!1,barBorderRadius:[],seriesGap:2,linearType:"none",linearOpacity:1,customColor:[],colorStop:0},t.extra.mix.column),l=t.chartData.xAxisData,s=l.xAxisPoints,d=l.eachSpacing,x=t.height-t.area[2],h=[];var c=0,p=0;e.forEach(function(e){"column"==e.type&&(p+=1)}),a.save();let g=-2,y=s.length+2,u=0,f=t.width+d;if(t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&(a.translate(t._scrollDistance_,0),g=Math.floor(-t._scrollDistance_/d)-2,y=g+t.xAxis.itemCount+4,u=-t._scrollDistance_-2*d+t.area[3],f=u+(t.xAxis.itemCount+4)*d),r.customColor=fillCustomColor(r.linearType,r.customColor,e,i),e.forEach(function(e){let l,m,S;l=[].concat(t.chartData.yAxisData.ranges[e.index]),m=l.pop(),S=l.shift();var A=e.data,T=getDataPoints(A,m,S,s,d,t,i,n);if(h.push(T),"column"==e.type){T=fixColumeData(T,d,p,c,i,t);for(let n,l=0;l<T.length;l++)if(n=T[l],null!==n&&l>g&&l<y){var b=n.x-n.width/2,P=t.height-n.y-t.area[2];a.beginPath();var w=e.color,C=e.color;if("none"!==r.linearType){var _=a.createLinearGradient(b,n.y,b,t.height-t.area[2]);"opacity"==r.linearType?(_.addColorStop(0,hexToRgb(w,r.linearOpacity)),_.addColorStop(1,hexToRgb(w,1))):(_.addColorStop(0,hexToRgb(r.customColor[e.linearIndex],r.linearOpacity)),_.addColorStop(r.colorStop,hexToRgb(r.customColor[e.linearIndex],r.linearOpacity)),_.addColorStop(1,hexToRgb(w,1))),w=_}if(r.barBorderRadius&&4===r.barBorderRadius.length||r.barBorderCircle){const e=b,i=n.y,l=n.width,s=t.height-t.area[2]-n.y;r.barBorderCircle&&(r.barBorderRadius=[l/2,l/2,0,0]);let[d,x,h,c]=r.barBorderRadius;d+h>s&&(d=s,h=0,x=s,c=0),d+h>l/2&&(d=l/2,h=0,x=l/2,c=0),d=0>d?0:d,x=0>x?0:x,h=0>h?0:h,c=0>c?0:c,a.arc(e+d,i+d,d,-o,-o/2),a.arc(e+l-x,i+x,x,-o/2,0),a.arc(e+l-h,i+s-h,h,0,o/2),a.arc(e+c,i+s-c,c,o/2,Math.PI)}else a.moveTo(b,n.y),a.lineTo(b+n.width-2,n.y),a.lineTo(b+n.width-2,t.height-t.area[2]),a.lineTo(b,t.height-t.area[2]),a.lineTo(b,n.y),a.setLineWidth(1),a.setStrokeStyle(C);a.setFillStyle(w),a.closePath(),a.fill()}c+=1}if("area"==e.type){let o=splitPoints(T);for(let n,r=0;r<o.length;r++){if(n=o[r],a.beginPath(),a.setStrokeStyle(e.color),a.setFillStyle(hexToRgb(e.color,.2)),a.setLineWidth(2*t.pix),1<n.length){var L=n[0];let t=n[n.length-1];a.moveTo(L.x,L.y);let i=0;if("curve"===e.style){for(let e,t=0;t<n.length;t++)if(e=n[t],0==i&&e.x>u&&(a.moveTo(e.x,e.y),i=1),0<t&&e.x>u&&e.x<f){var D=createCurveControlPoints(n,t-1);a.bezierCurveTo(D.ctrA.x,D.ctrA.y,D.ctrB.x,D.ctrB.y,e.x,e.y)}}else for(let e,t=0;t<n.length;t++)e=n[t],0==i&&e.x>u&&(a.moveTo(e.x,e.y),i=1),0<t&&e.x>u&&e.x<f&&a.lineTo(e.x,e.y);a.lineTo(t.x,x),a.lineTo(L.x,x),a.lineTo(L.x,L.y)}else{let e=n[0];a.moveTo(e.x-d/2,e.y),a.lineTo(e.x+d/2,e.y),a.lineTo(e.x+d/2,x),a.lineTo(e.x-d/2,x),a.moveTo(e.x-d/2,e.y)}a.closePath(),a.fill()}}if("line"==e.type){var F=splitPoints(T);F.forEach(function(i){if("dash"==e.lineType){let i=e.dashLength?e.dashLength:8;i*=t.pix,a.setLineDash([i,i])}if(a.beginPath(),a.setStrokeStyle(e.color),a.setLineWidth(2*t.pix),1===i.length)a.moveTo(i[0].x,i[0].y),a.arc(i[0].x,i[0].y,1,0,2*o);else{a.moveTo(i[0].x,i[0].y);let t=0;if("curve"==e.style){for(let e,o=0;o<i.length;o++)if(e=i[o],0==t&&e.x>u&&(a.moveTo(e.x,e.y),t=1),0<o&&e.x>u&&e.x<f){var n=createCurveControlPoints(i,o-1);a.bezierCurveTo(n.ctrA.x,n.ctrA.y,n.ctrB.x,n.ctrB.y,e.x,e.y)}}else for(let e,o=0;o<i.length;o++)e=i[o],0==t&&e.x>u&&(a.moveTo(e.x,e.y),t=1),0<o&&e.x>u&&e.x<f&&a.lineTo(e.x,e.y);a.moveTo(i[0].x,i[0].y)}a.stroke(),a.setLineDash([])})}"point"==e.type&&(e.addPoint=!0),!0==e.addPoint&&"column"!==e.type&&drawPointShape(T,e.color,e.pointShape,a,t)}),!1!==t.dataLabel&&1===n){var c=0;e.forEach(function(e){let o,r,l;o=[].concat(t.chartData.yAxisData.ranges[e.index]),r=o.pop(),l=o.shift();var x=e.data,h=getDataPoints(x,r,l,s,d,t,i,n);"column"===e.type?(h=fixColumeData(h,d,p,c,i,t),drawPointText(h,e,i,a),c+=1):drawPointText(h,e,i,a)})}return a.restore(),{xAxisPoints:s,calPoints:h,eachSpacing:d}}function drawToolTipBridge(e,t,i,a,o,n){var r=e.extra.tooltip||{};r.horizentalLine&&e.tooltip&&1===a&&("line"==e.type||"area"==e.type||"column"==e.type||"candle"==e.type||"mix"==e.type)&&drawToolTipHorizentalLine(e,t,i,o,n),i.save(),e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&i.translate(e._scrollDistance_,0),e.tooltip&&e.tooltip.textList&&e.tooltip.textList.length&&1===a&&drawToolTip(e.tooltip.textList,e.tooltip.offset,e,t,i,o,n),i.restore()}function drawXAxis(e,t,i,a){var o=Math.ceil;let n=t.chartData.xAxisData,r=n.xAxisPoints,l=n.startX,s=n.endX,d=n.eachSpacing;var x="center";("line"==t.type||"area"==t.type)&&(x=t.xAxis.boundaryGap);var h=t.height-t.area[2],c=t.area[0];if(t.enableScroll&&t.xAxis.scrollShow){var p=t.height-t.area[2]+i.xAxisHeight,g=s-l,y=d*(r.length-1),u=0;t._scrollDistance_&&(u=-t._scrollDistance_*g/y),a.beginPath(),a.setLineCap("round"),a.setLineWidth(6*t.pix),a.setStrokeStyle(t.xAxis.scrollBackgroundColor||"#EFEBEF"),a.moveTo(l,p),a.lineTo(s,p),a.stroke(),a.closePath(),a.beginPath(),a.setLineCap("round"),a.setLineWidth(6*t.pix),a.setStrokeStyle(t.xAxis.scrollColor||"#A6A6A6"),a.moveTo(l+u,p),a.lineTo(l+u+g*g/y,p),a.stroke(),a.closePath(),a.setLineCap("butt")}if(a.save(),t._scrollDistance_&&0!==t._scrollDistance_&&a.translate(t._scrollDistance_,0),!0===t.xAxis.calibration&&(a.setStrokeStyle(t.xAxis.gridColor||"#cccccc"),a.setLineCap("butt"),a.setLineWidth(1*t.pix),r.forEach(function(e,i){0<i&&(a.beginPath(),a.moveTo(e-d/2,h),a.lineTo(e-d/2,h+3*t.pix),a.closePath(),a.stroke())})),!0!==t.xAxis.disableGrid&&(a.setStrokeStyle(t.xAxis.gridColor||"#cccccc"),a.setLineCap("butt"),a.setLineWidth(1*t.pix),"dash"==t.xAxis.gridType&&a.setLineDash([t.xAxis.dashLength*t.pix,t.xAxis.dashLength*t.pix]),t.xAxis.gridEval=t.xAxis.gridEval||1,r.forEach(function(e,i){0==i%t.xAxis.gridEval&&(a.beginPath(),a.moveTo(e,h),a.lineTo(e,c),a.stroke())}),a.setLineDash([])),!0!==t.xAxis.disabled){let n=e.length;t.xAxis.labelCount&&(n=t.xAxis.itemCount?o(e.length/t.xAxis.itemCount*t.xAxis.labelCount):t.xAxis.labelCount,n-=1);let l=o(e.length/n),s=[],c=e.length;for(let t=0;t<c;t++)0==t%l?s.push(e[t]):s.push("");s[c-1]=e[c-1];var f=t.xAxis.fontSize||i.fontSize;0===i._xAxisTextAngle_?s.forEach(function(e,o){var n=-measureText(e+"",f*t.pix,a)/2;"center"==x&&(n+=d/2);var l=0;t.xAxis.scrollShow&&(l=6*t.pix),a.beginPath(),a.setFontSize(f*t.pix),a.setFillStyle(t.xAxis.fontColor||t.fontColor),a.fillText(e+"",r[o]+n,h+f*t.pix+(i.xAxisHeight*t.pix-l-f*t.pix)/2),a.closePath(),a.stroke()}):s.forEach(function(e,o){a.save(),a.beginPath(),a.setFontSize(f*t.pix),a.setFillStyle(t.xAxis.fontColor||t.fontColor);var n=measureText(e+"",f*t.pix,a),l=-n;"center"==x&&(l+=d/2);var s=calRotateTranslate(r[o]+d/2,h+f*t.pix/2+5,t.height),c=s.transX,p=s.transY;a.rotate(-1*i._xAxisTextAngle_),a.translate(c,p),a.fillText(e+"",r[o]+l,h+f*t.pix+5),a.closePath(),a.stroke(),a.restore()})}a.restore(),t.xAxis.axisLine&&(a.beginPath(),a.setStrokeStyle(t.xAxis.axisLineColor),a.setLineWidth(1*t.pix),a.moveTo(l,t.height-t.area[2]),a.lineTo(s,t.height-t.area[2]),a.stroke())}function drawYAxisGrid(e,t,i,a){if(!0===t.yAxis.disableGrid)return;let o=t.height-t.area[0]-t.area[2],n=o/t.yAxis.splitNumber,r=t.area[3],l=t.chartData.xAxisData.xAxisPoints,s=t.chartData.xAxisData.eachSpacing,d=s*(l.length-1),x=[],h=1;!1===t.xAxis.axisLine&&(h=0);for(let o=h;o<t.yAxis.splitNumber+1;o++)x.push(t.height-t.area[2]-n*o);a.save(),t._scrollDistance_&&0!==t._scrollDistance_&&a.translate(t._scrollDistance_,0),"dash"==t.yAxis.gridType&&a.setLineDash([t.yAxis.dashLength*t.pix,t.yAxis.dashLength*t.pix]),a.setStrokeStyle(t.yAxis.gridColor),a.setLineWidth(1*t.pix),x.forEach(function(e){a.beginPath(),a.moveTo(r,e),a.lineTo(r+d,e),a.stroke()}),a.setLineDash([]),a.restore()}function drawYAxis(e,t,a,o){if(!0===t.yAxis.disabled)return;var i=t.height-t.area[0]-t.area[2],n=i/t.yAxis.splitNumber,r=t.area[3],l=t.width-t.area[1],s=t.height-t.area[2],d=s+a.xAxisHeight;t.xAxis.scrollShow&&(d-=3*t.pix),t.xAxis.rotateLabel&&(d=t.height-t.area[2]+t.fontSize*t.pix/2),o.beginPath(),o.setFillStyle(t.background),!0==t.enableScroll&&t.xAxis.scrollPosition&&"left"!==t.xAxis.scrollPosition&&o.fillRect(0,0,r,d),!0==t.enableScroll&&t.xAxis.scrollPosition&&"right"!==t.xAxis.scrollPosition&&o.fillRect(l,0,t.width,d),o.closePath(),o.stroke();var x=[];for(let r=0;r<=t.yAxis.splitNumber;r++)x.push(t.area[0]+n*r);let h=t.area[3],c=t.width-t.area[1];if(t.yAxis.data)for(let e,n=0;n<t.yAxis.data.length;n++)if(e=t.yAxis.data[n],!0!==e.disabled){let i=t.chartData.yAxisData.rangesFormat[n],r=e.fontSize||a.fontSize,l=t.chartData.yAxisData.yAxisWidth[n],d=e.textAlign||"right";if(i.forEach(function(i,a){var n=x[a]?x[a]:s;o.beginPath(),o.setFontSize(r),o.setLineWidth(1*t.pix),o.setStrokeStyle(e.axisLineColor||"#cccccc"),o.setFillStyle(e.fontColor||t.fontColor);let p=0,g=4*t.pix;"left"==l.position?(!0==e.calibration&&(o.moveTo(h,n),o.lineTo(h-3*t.pix,n),g+=3*t.pix),"left"===d?(o.setTextAlign("left"),p=h-l.width):"right"===d?(o.setTextAlign("right"),p=h-g):(o.setTextAlign("center"),p=h-l.width/2),o.fillText(i+"",p,n+r/2-3*t.pix)):(!0==e.calibration&&(o.moveTo(c,n),o.lineTo(c+3*t.pix,n),g+=3*t.pix),"left"===d?(o.setTextAlign("left"),p=c+g):"right"===d?(o.setTextAlign("right"),p=c+l.width):(o.setTextAlign("center"),p=c+l.width/2),o.fillText(i+"",p,n+r/2-3*t.pix)),o.closePath(),o.stroke(),o.setTextAlign("left")}),!1!==e.axisLine&&(o.beginPath(),o.setStrokeStyle(e.axisLineColor||"#cccccc"),o.setLineWidth(1*t.pix),"left"==l.position?(o.moveTo(h,t.height-t.area[2]),o.lineTo(h,t.area[0])):(o.moveTo(c,t.height-t.area[2]),o.lineTo(c,t.area[0])),o.stroke()),t.yAxis.showTitle){let i=e.titleFontSize||a.fontSize,n=e.title;o.beginPath(),o.setFontSize(i),o.setFillStyle(e.titleFontColor||t.fontColor),"left"==l.position?o.fillText(n,h-measureText(n,i,o)/2,t.area[0]-10*t.pix):o.fillText(n,c-measureText(n,i,o)/2,t.area[0]-10*t.pix),o.closePath(),o.stroke()}"left"==l.position?h-=l.width+t.yAxis.padding*t.pix:c+=l.width+t.yAxis.padding*t.pix}}function drawLegend(e,t,i,a,o){if(!1===t.legend.show)return;let n=o.legendData,r=n.points,l=n.area,s=t.legend.padding*t.pix,d=t.legend.fontSize*t.pix,x=15*t.pix,h=5*t.pix,c=t.legend.itemGap*t.pix,p=Math.max(t.legend.lineHeight*t.pix,d);a.beginPath(),a.setLineWidth(t.legend.borderWidth*t.pix),a.setStrokeStyle(t.legend.borderColor),a.setFillStyle(t.legend.backgroundColor),a.moveTo(l.start.x,l.start.y),a.rect(l.start.x,l.start.y,l.width,l.height),a.closePath(),a.fill(),a.stroke(),r.forEach(function(e,o){let r=0,g=0;r=n.widthArr[o],g=n.heightArr[o];let y=0,u=0;"top"==t.legend.position||"bottom"==t.legend.position?(y=l.start.x+(l.width-r)/2,u=l.start.y+s+o*p):(r=0==o?0:n.widthArr[o-1],y=l.start.x+s+r,u=l.start.y+s+(l.height-g)/2),a.setFontSize(i.fontSize);for(let n,r=0;r<e.length;r++){switch(n=e[r],n.area=[0,0,0,0],n.area[0]=y,n.area[1]=u,n.area[3]=u+p,a.beginPath(),a.setLineWidth(1*t.pix),a.setStrokeStyle(n.show?n.color:t.legend.hiddenColor),a.setFillStyle(n.show?n.color:t.legend.hiddenColor),n.legendShape){case"line":a.moveTo(y,u+.5*p-2*t.pix),a.fillRect(y,u+.5*p-2*t.pix,15*t.pix,4*t.pix);break;case"triangle":a.moveTo(y+7.5*t.pix,u+.5*p-5*t.pix),a.lineTo(y+2.5*t.pix,u+.5*p+5*t.pix),a.lineTo(y+12.5*t.pix,u+.5*p+5*t.pix),a.lineTo(y+7.5*t.pix,u+.5*p-5*t.pix);break;case"diamond":a.moveTo(y+7.5*t.pix,u+.5*p-5*t.pix),a.lineTo(y+2.5*t.pix,u+.5*p),a.lineTo(y+7.5*t.pix,u+.5*p+5*t.pix),a.lineTo(y+12.5*t.pix,u+.5*p),a.lineTo(y+7.5*t.pix,u+.5*p-5*t.pix);break;case"circle":a.moveTo(y+7.5*t.pix,u+.5*p),a.arc(y+7.5*t.pix,u+.5*p,5*t.pix,0,2*Math.PI);break;case"rect":a.moveTo(y,u+.5*p-5*t.pix),a.fillRect(y,u+.5*p-5*t.pix,15*t.pix,10*t.pix);break;case"square":a.moveTo(y+5*t.pix,u+.5*p-5*t.pix),a.fillRect(y+5*t.pix,u+.5*p-5*t.pix,10*t.pix,10*t.pix);break;case"none":break;default:a.moveTo(y,u+.5*p-5*t.pix),a.fillRect(y,u+.5*p-5*t.pix,15*t.pix,10*t.pix);}a.closePath(),a.fill(),a.stroke(),y+=x+h;a.beginPath(),a.setFontSize(d),a.setFillStyle(n.show?t.legend.fontColor:t.legend.hiddenColor),a.fillText(n.name,y,u+(.5*p+.5*d-2)),a.closePath(),a.stroke(),"top"==t.legend.position||"bottom"==t.legend.position?(y+=measureText(n.name,d,a)+c,n.area[2]=y):(n.area[2]=y+measureText(n.name,d,a)+c,y-=x+h,u+=p)}})}function drawPieDataPoints(e,t,a,o){var n=Math.PI,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,l=assign({},{activeOpacity:.5,activeRadius:10*t.pix,offsetAngle:0,labelWidth:15*t.pix,ringWidth:30,customRadius:0,border:!1,borderWidth:2,borderColor:"#FFFFFF",linearType:"none",customColor:[]},"pie"==t.type?t.extra.pie:t.extra.ring),s={x:t.area[3]+(t.width-t.area[1]-t.area[3])/2,y:t.area[0]+(t.height-t.area[0]-t.area[2])/2};0==a.pieChartLinePadding&&(a.pieChartLinePadding=l.activeRadius);var d=Math.min((t.width-t.area[1]-t.area[3])/2-a.pieChartLinePadding-a.pieChartTextPadding-a._pieTextMaxLength_,(t.height-t.area[0]-t.area[2])/2-a.pieChartLinePadding-a.pieChartTextPadding);0<l.customRadius&&(d=l.customRadius),e=getPieDataPoints(e,d,r);var x=l.activeRadius;if(l.customColor=fillCustomColor(l.linearType,l.customColor,e,a),e=e.map(function(e){return e._start_+=l.offsetAngle*n/180,e}),e.forEach(function(e,i){t.tooltip&&t.tooltip.index==i&&(o.beginPath(),o.setFillStyle(hexToRgb(e.color,l.activeOpacity||.5)),o.moveTo(s.x,s.y),o.arc(s.x,s.y,e._radius_+x,e._start_,e._start_+2*e._proportion_*n),o.closePath(),o.fill()),o.beginPath(),o.setLineWidth(l.borderWidth*t.pix),o.lineJoin="round",o.setStrokeStyle(l.borderColor);var a=e.color;if("custom"==l.linearType){var r;r=o.createCircularGradient?o.createCircularGradient(s.x,s.y,e._radius_):o.createRadialGradient(s.x,s.y,0,s.x,s.y,e._radius_),r.addColorStop(0,hexToRgb(l.customColor[e.linearIndex],1)),r.addColorStop(1,hexToRgb(e.color,1)),a=r}o.setFillStyle(a),o.moveTo(s.x,s.y),o.arc(s.x,s.y,e._radius_,e._start_,e._start_+2*e._proportion_*n),o.closePath(),o.fill(),!0==l.border&&o.stroke()}),"ring"===t.type){var h=.6*d;"number"==typeof l.ringWidth&&0<l.ringWidth&&(h=Math.max(0,d-l.ringWidth)),o.beginPath(),o.setFillStyle(t.background),o.moveTo(s.x,s.y),o.arc(s.x,s.y,h,0,2*n),o.closePath(),o.fill()}if(!1!==t.dataLabel&&1===r){for(var c=!1,p=0,g=e.length;p<g;p++)if(0<e[p].data){c=!0;break}c&&drawPieText(e,t,a,o,d,s)}return 1===r&&"ring"===t.type&&drawRingTitle(t,a,o,s),{center:s,radius:d,series:e}}function drawRoseDataPoints(e,t,a,o){var n=Math.PI,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,l=assign({},{type:"area",activeOpacity:.5,activeRadius:10*t.pix,offsetAngle:0,labelWidth:15*t.pix,border:!1,borderWidth:2,borderColor:"#FFFFFF",linearType:"none",customColor:[]},t.extra.rose);0==a.pieChartLinePadding&&(a.pieChartLinePadding=l.activeRadius);var s={x:t.area[3]+(t.width-t.area[1]-t.area[3])/2,y:t.area[0]+(t.height-t.area[0]-t.area[2])/2},d=Math.min((t.width-t.area[1]-t.area[3])/2-a.pieChartLinePadding-a.pieChartTextPadding-a._pieTextMaxLength_,(t.height-t.area[0]-t.area[2])/2-a.pieChartLinePadding-a.pieChartTextPadding),x=l.minRadius||.5*d;e=getRoseDataPoints(e,l.type,x,d,r);var h=l.activeRadius;if(l.customColor=fillCustomColor(l.linearType,l.customColor,e,a),e=e.map(function(e){return e._start_+=(l.offsetAngle||0)*n/180,e}),e.forEach(function(e,i){t.tooltip&&t.tooltip.index==i&&(o.beginPath(),o.setFillStyle(hexToRgb(e.color,l.activeOpacity||.5)),o.moveTo(s.x,s.y),o.arc(s.x,s.y,h+e._radius_,e._start_,e._start_+2*e._rose_proportion_*n),o.closePath(),o.fill()),o.beginPath(),o.setLineWidth(l.borderWidth*t.pix),o.lineJoin="round",o.setStrokeStyle(l.borderColor);var a=e.color;if("custom"==l.linearType){var r;r=o.createCircularGradient?o.createCircularGradient(s.x,s.y,e._radius_):o.createRadialGradient(s.x,s.y,0,s.x,s.y,e._radius_),r.addColorStop(0,hexToRgb(l.customColor[e.linearIndex],1)),r.addColorStop(1,hexToRgb(e.color,1)),a=r}o.setFillStyle(a),o.moveTo(s.x,s.y),o.arc(s.x,s.y,e._radius_,e._start_,e._start_+2*e._rose_proportion_*n),o.closePath(),o.fill(),!0==l.border&&o.stroke()}),!1!==t.dataLabel&&1===r){for(var c=!1,p=0,g=e.length;p<g;p++)if(0<e[p].data){c=!0;break}c&&drawPieText(e,t,a,o,d,s)}return{center:s,radius:d,series:e}}function drawArcbarDataPoints(e,t,i,a){var o=Math.PI,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,r=assign({},{startAngle:.75,endAngle:.25,type:"default",width:12*t.pix,gap:2*t.pix,linearType:"none",customColor:[]},t.extra.arcbar);e=getArcbarDataPoints(e,r,n);var l=r.centerX||r.centerY?{x:r.centerX?r.centerX:t.width/2,y:r.centerY?r.centerY:t.height/2}:{x:t.width/2,y:t.height/2};var s;r.radius?s=r.radius:(s=Math.min(l.x,l.y),s-=5*t.pix,s-=r.width/2),r.customColor=fillCustomColor(r.linearType,r.customColor,e,i);for(let n,h=0;h<e.length;h++){n=e[h],a.setLineWidth(r.width),a.setStrokeStyle(r.backgroundColor||"#E9E9E9"),a.setLineCap("round"),a.beginPath(),"default"==r.type?a.arc(l.x,l.y,s-(r.width+r.gap)*h,r.startAngle*o,r.endAngle*o,!1):a.arc(l.x,l.y,s-(r.width+r.gap)*h,0,2*o,!1),a.stroke();var d=n.color;if("custom"==r.linearType){var x=a.createLinearGradient(l.x-s,l.y,l.x+s,l.y);x.addColorStop(1,hexToRgb(r.customColor[n.linearIndex],1)),x.addColorStop(0,hexToRgb(n.color,1)),d=x}a.setLineWidth(r.width),a.setStrokeStyle(d),a.setLineCap("round"),a.beginPath(),a.arc(l.x,l.y,s-(r.width+r.gap)*h,r.startAngle*o,n._proportion_*o,!1),a.stroke()}return drawRingTitle(t,i,a,l),{center:l,radius:s,series:e}}function drawGaugeDataPoints(e,t,a,i,o){var n=Math.PI,r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:1,l=assign({},{type:"default",startAngle:.75,endAngle:.25,width:15,splitLine:{fixRadius:0,splitNumber:10,width:15,color:"#FFFFFF",childNumber:5,childWidth:5},pointer:{width:15,color:"auto"}},a.extra.gauge);null==l.oldAngle&&(l.oldAngle=l.startAngle),null==l.oldData&&(l.oldData=0),e=getGaugeAxisPoints(e,l.startAngle,l.endAngle);var s={x:a.width/2,y:a.height/2},d=Math.min(s.x,s.y);d-=5*a.pix,d-=l.width/2;var x=d-l.width,h=0;if("progress"==l.type){var c=d-3*l.width;o.beginPath();let e=o.createLinearGradient(s.x,s.y-c,s.x,s.y+c);e.addColorStop("0",hexToRgb(t[0].color,.3)),e.addColorStop("1.0",hexToRgb("#FFFFFF",.1)),o.setFillStyle(e),o.arc(s.x,s.y,c,0,2*n,!1),o.fill(),o.setLineWidth(l.width),o.setStrokeStyle(hexToRgb(t[0].color,.3)),o.setLineCap("round"),o.beginPath(),o.arc(s.x,s.y,x,l.startAngle*n,l.endAngle*n,!1),o.stroke(),h=l.startAngle-l.endAngle+1;let i=h/l.splitLine.splitNumber,p=h/l.splitLine.splitNumber/l.splitLine.childNumber,g=-d-.5*l.width-l.splitLine.fixRadius,y=-d-l.width-l.splitLine.fixRadius+l.splitLine.width;o.save(),o.translate(s.x,s.y),o.rotate((l.startAngle-1)*n);let u=l.splitLine.splitNumber*l.splitLine.childNumber+1,f=t[0].data*r;for(let e=0;e<u;e++)o.beginPath(),f>e/u?o.setStrokeStyle(hexToRgb(t[0].color,1)):o.setStrokeStyle(hexToRgb(t[0].color,.3)),o.setLineWidth(3*a.pix),o.moveTo(g,0),o.lineTo(y,0),o.stroke(),o.rotate(p*n);o.restore(),t=getArcbarDataPoints(t,l,r),o.setLineWidth(l.width),o.setStrokeStyle(t[0].color),o.setLineCap("round"),o.beginPath(),o.arc(s.x,s.y,x,l.startAngle*n,t[0]._proportion_*n,!1),o.stroke();let m=d-2.5*l.width;o.save(),o.translate(s.x,s.y),o.rotate((t[0]._proportion_-1)*n),o.beginPath(),o.setLineWidth(l.width/3);let S=o.createLinearGradient(0,.6*-m,0,.6*m);S.addColorStop("0",hexToRgb("#FFFFFF",0)),S.addColorStop("0.5",hexToRgb(t[0].color,1)),S.addColorStop("1.0",hexToRgb("#FFFFFF",0)),o.setStrokeStyle(S),o.arc(0,0,m,.85*n,1.15*n,!1),o.stroke(),o.beginPath(),o.setLineWidth(1),o.setStrokeStyle(t[0].color),o.setFillStyle(t[0].color),o.moveTo(-m-l.width/3/2,-4),o.lineTo(-m-l.width/3/2-4,0),o.lineTo(-m-l.width/3/2,4),o.lineTo(-m-l.width/3/2,-4),o.stroke(),o.fill(),o.restore()}else{o.setLineWidth(l.width),o.setLineCap("butt");for(let t,a=0;a<e.length;a++)t=e[a],o.beginPath(),o.setStrokeStyle(t.color),o.arc(s.x,s.y,d,t._startAngle_*n,t._endAngle_*n,!1),o.stroke();o.save(),h=l.startAngle-l.endAngle+1;let c=h/l.splitLine.splitNumber,p=h/l.splitLine.splitNumber/l.splitLine.childNumber,g=-d-.5*l.width-l.splitLine.fixRadius,y=-d-.5*l.width-l.splitLine.fixRadius+l.splitLine.width,u=-d-.5*l.width-l.splitLine.fixRadius+l.splitLine.childWidth;o.translate(s.x,s.y),o.rotate((l.startAngle-1)*n);for(let e=0;e<l.splitLine.splitNumber+1;e++)o.beginPath(),o.setStrokeStyle(l.splitLine.color),o.setLineWidth(2*a.pix),o.moveTo(g,0),o.lineTo(y,0),o.stroke(),o.rotate(c*n);o.restore(),o.save(),o.translate(s.x,s.y),o.rotate((l.startAngle-1)*n);for(let e=0;e<l.splitLine.splitNumber*l.splitLine.childNumber+1;e++)o.beginPath(),o.setStrokeStyle(l.splitLine.color),o.setLineWidth(1*a.pix),o.moveTo(g,0),o.lineTo(u,0),o.stroke(),o.rotate(p*n);o.restore(),t=getGaugeDataPoints(t,e,l,r);for(let e,a=0;a<t.length;a++)e=t[a],o.save(),o.translate(s.x,s.y),o.rotate((e._proportion_-1)*n),o.beginPath(),o.setFillStyle(e.color),o.moveTo(l.pointer.width,0),o.lineTo(0,-l.pointer.width/2),o.lineTo(-x,0),o.lineTo(0,l.pointer.width/2),o.lineTo(l.pointer.width,0),o.closePath(),o.fill(),o.beginPath(),o.setFillStyle("#FFFFFF"),o.arc(0,0,l.pointer.width/6,0,2*n,!1),o.fill(),o.restore();!1!==a.dataLabel&&drawGaugeLabel(l,d,s,a,i,o)}return drawRingTitle(a,i,o,s),1===r&&"gauge"===a.type&&(a.extra.gauge.oldAngle=t[0]._proportion_,a.extra.gauge.oldData=t[0].data),{center:s,radius:d,innerRadius:x,categories:e,totalAngle:h}}function drawRadarDataPoints(e,t,a,o){var n=Math.cos,r=Math.sin,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,s=assign({},{gridColor:"#cccccc",gridType:"radar",labelColor:"#666666",opacity:.2,gridCount:3,border:!1,borderWidth:2},t.extra.radar),d=getRadarCoordinateSeries(t.categories.length),x={x:t.area[3]+(t.width-t.area[1]-t.area[3])/2,y:t.area[0]+(t.height-t.area[0]-t.area[2])/2},h=(t.width-t.area[1]-t.area[3])/2,c=(t.height-t.area[0]-t.area[2])/2,p=Math.min(h-(getMaxTextListLength(t.categories,a.fontSize,o)+a.radarLabelTextMargin),c-a.radarLabelTextMargin);p-=a.radarLabelTextMargin*t.pix,o.beginPath(),o.setLineWidth(1*t.pix),o.setStrokeStyle(s.gridColor),d.forEach(function(e){var t=convertCoordinateOrigin(p*n(e),p*r(e),x);o.moveTo(x.x,x.y),o.lineTo(t.x,t.y)}),o.stroke(),o.closePath();for(var g=function(e){var i={};if(o.beginPath(),o.setLineWidth(1*t.pix),o.setStrokeStyle(s.gridColor),"radar"==s.gridType)d.forEach(function(t,a){var l=convertCoordinateOrigin(p/s.gridCount*e*n(t),p/s.gridCount*e*r(t),x);0===a?(i=l,o.moveTo(l.x,l.y)):o.lineTo(l.x,l.y)}),o.lineTo(i.x,i.y);else{var a=convertCoordinateOrigin(0.0707372016677029*(p/s.gridCount*e),0.9974949866040544*(p/s.gridCount*e),x);o.arc(x.x,x.y,x.y-a.y,0,2*Math.PI,!1)}o.stroke(),o.closePath()},y=1;y<=s.gridCount;y++)g(y);var u=getRadarDataPoints(d,x,p,e,t,l);return u.forEach(function(e){if(o.beginPath(),o.setLineWidth(s.borderWidth*t.pix),o.setStrokeStyle(e.color),o.setFillStyle(hexToRgb(e.color,s.opacity)),e.data.forEach(function(e,t){0===t?o.moveTo(e.position.x,e.position.y):o.lineTo(e.position.x,e.position.y)}),o.closePath(),o.fill(),!0===s.border&&o.stroke(),o.closePath(),!1!==t.dataPointShape){var i=e.data.map(function(e){return e.position});drawPointShape(i,e.color,e.pointShape,o,t)}}),drawRadarLabel(d,p,x,t,a,o),{center:x,radius:p,angleList:d}}function normalInt(e,t,a){a=0==a?1:a;for(var o=[],n=0;n<a;n++)o[n]=Math.random();return Math.floor(o.reduce(function(e,t){return e+t})/a*(t-e))+e}function collisionNew(e,t,a,o){var n=!1;for(let r=0;r<t.length;r++)if(t[r].area)if(!(e[3]<t[r].area[1]||e[0]>t[r].area[2]||e[1]>t[r].area[3]||e[2]<t[r].area[0])){n=!0;break}else if(0>e[0]||0>e[1]||e[2]>a||e[3]>o){n=!0;break}else n=!1;return n}function getBoundingBox(e){var t,a={};a.xMin=180,a.xMax=0,a.yMin=90,a.yMax=0;for(var o,n=0;n<e.length;n++){o=e[n].geometry.coordinates;for(var r=0;r<o.length;r++){t=o[r],1==t.length&&(t=t[0]);for(var l=0;l<t.length;l++){var s=t[l][0],d=t[l][1],x={x:s,y:d};a.xMin=a.xMin<x.x?a.xMin:x.x,a.xMax=a.xMax>x.x?a.xMax:x.x,a.yMin=a.yMin<x.y?a.yMin:x.y,a.yMax=a.yMax>x.y?a.yMax:x.y}}}return a}function coordinateToPoint(e,t,i,a,o,n){return{x:(t-i.xMin)*a+o,y:(i.yMax-e)*a+n}}function pointToCoordinate(e,t,i,a,o,n){return{x:(t-o)/a+i.xMin,y:i.yMax-(e-n)/a}}function isRayIntersectsSegment(e,t,i){if(t[1]==i[1])return!1;if(t[1]>e[1]&&i[1]>e[1])return!1;if(t[1]<e[1]&&i[1]<e[1])return!1;if(t[1]==e[1]&&i[1]>e[1])return!1;if(i[1]==e[1]&&t[1]>e[1])return!1;if(t[0]<e[0]&&i[1]<e[1])return!1;let a=i[0]-(i[0]-t[0])*(i[1]-e[1])/(i[1]-t[1]);return!(a<e[0])}function isPoiWithinPoly(e,t,i){let a=0;for(let o,n=0;n<t.length;n++){o=t[n][0],1==t.length&&(o=t[n][0]);for(let t=0;t<o.length-1;t++){let n=o[t],r=o[t+1];i&&(n=lonlat2mercator(o[t][0],o[t][1]),r=lonlat2mercator(o[t+1][0],o[t+1][1])),isRayIntersectsSegment(e,n,r)&&(a+=1)}}return!(1!=a%2)}function drawMapDataPoints(e,t,a,o){var n,r,l=Math.abs,s=assign({},{border:!0,mercator:!1,borderWidth:1,borderColor:"#666666",fillOpacity:.6,activeBorderColor:"#f04864",activeFillColor:"#facc14",activeFillOpacity:1},t.extra.map),d=e,x=getBoundingBox(d);if(s.mercator){var h=lonlat2mercator(x.xMax,x.yMax),c=lonlat2mercator(x.xMin,x.yMin);x.xMax=h[0],x.yMax=h[1],x.xMin=c[0],x.yMin=c[1]}for(var p=t.width/l(x.xMax-x.xMin),g=t.height/l(x.yMax-x.yMin),y=p<g?p:g,u=t.width/2-l(x.xMax-x.xMin)/2*y,f=t.height/2-l(x.yMax-x.yMin)/2*y,m=0;m<d.length;m++){o.beginPath(),o.setLineWidth(s.borderWidth*t.pix),o.setStrokeStyle(s.borderColor),o.setFillStyle(hexToRgb(e[m].color,s.fillOpacity)),t.tooltip&&t.tooltip.index==m&&(o.setStrokeStyle(s.activeBorderColor),o.setFillStyle(hexToRgb(s.activeFillColor,s.activeFillOpacity)));for(var S=d[m].geometry.coordinates,A=0;A<S.length;A++){n=S[A],1==n.length&&(n=n[0]);for(var T,b=0;b<n.length;b++)T=[,,],T=s.mercator?lonlat2mercator(n[b][0],n[b][1]):n[b],r=coordinateToPoint(T[1],T[0],x,y,u,f),0==b?(o.beginPath(),o.moveTo(r.x,r.y)):o.lineTo(r.x,r.y);o.fill(),!0==s.border&&o.stroke()}if(!0==t.dataLabel){var P=d[m].properties.centroid;if(P){s.mercator&&(P=lonlat2mercator(d[m].properties.centroid[0],d[m].properties.centroid[1])),r=coordinateToPoint(P[1],P[0],x,y,u,f);let e=d[m].textSize||a.fontSize,i=d[m].properties.name;o.beginPath(),o.setFontSize(e),o.setFillStyle(d[m].textColor||t.fontColor),o.fillText(i,r.x-measureText(i,e,o)/2,r.y+e/2),o.closePath(),o.stroke()}}}t.chartData.mapData={bounds:x,scale:y,xoffset:u,yoffset:f,mercator:s.mercator},drawToolTipBridge(t,a,o,1),o.draw()}function getWordCloudPoint(e,t,a){let o=e.series.sort(function(e,t){return parseInt(t.textSize)-parseInt(e.textSize)});switch(t){case"normal":for(let t=0;t<o.length;t++){let i,n,r,l=o[t].name,s=o[t].textSize,d=measureText(l,s,a),x=0;for(;;){x++,i=normalInt(-e.width/2,e.width/2,5)-d/2,n=normalInt(-e.height/2,e.height/2,5)+s/2,r=[i-5+e.width/2,n-5-s+e.height/2,i+d+5+e.width/2,n+5+e.height/2];let t=collisionNew(r,o,e.width,e.height);if(!t)break;if(1e3==x){r=[-100,-100,-100,-100];break}}o[t].area=r}break;case"vertical":function n(){return!!(.7<Math.random())};for(let t=0;t<o.length;t++){let i,r,l,s,d=o[t].name,x=o[t].textSize,h=measureText(d,x,a),c=n(),p=0;for(;;){p++;let t;if(c?(i=normalInt(-e.width/2,e.width/2,5)-h/2,r=normalInt(-e.height/2,e.height/2,5)+x/2,l=[r-5-h+e.width/2,-i-5+e.height/2,r+5+e.width/2,-i+x+5+e.height/2],s=[e.width-(e.width/2-e.height/2)-(-i+x+5+e.height/2)-5,e.height/2-e.width/2+(r-5-h+e.width/2)-5,e.width-(e.width/2-e.height/2)-(-i+x+5+e.height/2)+x,e.height/2-e.width/2+(r-5-h+e.width/2)+h+5],t=collisionNew(s,o,e.height,e.width)):(i=normalInt(-e.width/2,e.width/2,5)-h/2,r=normalInt(-e.height/2,e.height/2,5)+x/2,l=[i-5+e.width/2,r-5-x+e.height/2,i+h+5+e.width/2,r+5+e.height/2],t=collisionNew(l,o,e.width,e.height)),!t)break;if(1e3==p){l=[-1e3,-1e3,-1e3,-1e3];break}}c?(o[t].area=s,o[t].areav=l):o[t].area=l,o[t].rotate=c};}return o}function drawWordCloudDataPoints(e,t,i,a){let o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:1,n=assign({},{type:"normal",autoColors:!0},t.extra.word);t.chartData.wordCloudData||(t.chartData.wordCloudData=getWordCloudPoint(t,n.type,a)),a.beginPath(),a.setFillStyle(t.background),a.rect(0,0,t.width,t.height),a.fill(),a.save();let r=t.chartData.wordCloudData;a.translate(t.width/2,t.height/2);for(let n=0;n<r.length;n++){a.save(),r[n].rotate&&a.rotate(90*Math.PI/180);let e=r[n].name,i=r[n].textSize,l=measureText(e,i,a);a.beginPath(),a.setStrokeStyle(r[n].color),a.setFillStyle(r[n].color),a.setFontSize(i),r[n].rotate?0<r[n].areav[0]&&(t.tooltip?t.tooltip.index==n?a.strokeText(e,(r[n].areav[0]+5-t.width/2)*o-l*(1-o)/2,(r[n].areav[1]+5+i-t.height/2)*o):a.fillText(e,(r[n].areav[0]+5-t.width/2)*o-l*(1-o)/2,(r[n].areav[1]+5+i-t.height/2)*o):a.fillText(e,(r[n].areav[0]+5-t.width/2)*o-l*(1-o)/2,(r[n].areav[1]+5+i-t.height/2)*o)):0<r[n].area[0]&&(t.tooltip?t.tooltip.index==n?a.strokeText(e,(r[n].area[0]+5-t.width/2)*o-l*(1-o)/2,(r[n].area[1]+5+i-t.height/2)*o):a.fillText(e,(r[n].area[0]+5-t.width/2)*o-l*(1-o)/2,(r[n].area[1]+5+i-t.height/2)*o):a.fillText(e,(r[n].area[0]+5-t.width/2)*o-l*(1-o)/2,(r[n].area[1]+5+i-t.height/2)*o)),a.stroke(),a.restore()}a.restore()}function drawFunnelDataPoints(e,t,i,a){let o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,n=assign({},{activeWidth:10,activeOpacity:.3,border:!1,borderWidth:2,borderColor:"#FFFFFF",fillOpacity:1,labelAlign:"right",linearType:"none",customColor:[]},t.extra.funnel),r=(t.height-t.area[0]-t.area[2])/e.length,l={x:t.area[3]+(t.width-t.area[1]-t.area[3])/2,y:t.height-t.area[2]},s=n.activeWidth,d=Math.min((t.width-t.area[1]-t.area[3])/2-s,(t.height-t.area[0]-t.area[2])/2-s);e=getFunnelDataPoints(e,d,o),a.save(),a.translate(l.x,l.y),n.customColor=fillCustomColor(n.linearType,n.customColor,e,i);for(let o=0;o<e.length;o++){if(0==o){t.tooltip&&t.tooltip.index==o&&(a.beginPath(),a.setFillStyle(hexToRgb(e[o].color,n.activeOpacity)),a.moveTo(-s,0),a.lineTo(-e[o].radius-s,-r),a.lineTo(e[o].radius+s,-r),a.lineTo(s,0),a.lineTo(-s,0),a.closePath(),a.fill()),e[o].funnelArea=[l.x-e[o].radius,l.y-r,l.x+e[o].radius,l.y],a.beginPath(),a.setLineWidth(n.borderWidth*t.pix),a.setStrokeStyle(n.borderColor);var x=hexToRgb(e[o].color,n.fillOpacity);if("custom"==n.linearType){var h=a.createLinearGradient(e[o].radius,-r,-e[o].radius,-r);h.addColorStop(0,hexToRgb(e[o].color,n.fillOpacity)),h.addColorStop(.5,hexToRgb(n.customColor[e[o].linearIndex],n.fillOpacity)),h.addColorStop(1,hexToRgb(e[o].color,n.fillOpacity)),x=h}a.setFillStyle(x),a.moveTo(0,0),a.lineTo(-e[o].radius,-r),a.lineTo(e[o].radius,-r),a.lineTo(0,0),a.closePath(),a.fill(),!0==n.border&&a.stroke()}else{t.tooltip&&t.tooltip.index==o&&(a.beginPath(),a.setFillStyle(hexToRgb(e[o].color,n.activeOpacity)),a.moveTo(0,0),a.lineTo(-e[o-1].radius-s,0),a.lineTo(-e[o].radius-s,-r),a.lineTo(e[o].radius+s,-r),a.lineTo(e[o-1].radius+s,0),a.lineTo(0,0),a.closePath(),a.fill()),e[o].funnelArea=[l.x-e[o].radius,l.y-r*(o+1),l.x+e[o].radius,l.y-r*o],a.beginPath(),a.setLineWidth(n.borderWidth*t.pix),a.setStrokeStyle(n.borderColor);var x=hexToRgb(e[o].color,n.fillOpacity);if("custom"==n.linearType){var h=a.createLinearGradient(e[o].radius,-r,-e[o].radius,-r);h.addColorStop(0,hexToRgb(e[o].color,n.fillOpacity)),h.addColorStop(.5,hexToRgb(n.customColor[e[o].linearIndex],n.fillOpacity)),h.addColorStop(1,hexToRgb(e[o].color,n.fillOpacity)),x=h}a.setFillStyle(x),a.moveTo(0,0),a.lineTo(-e[o-1].radius,0),a.lineTo(-e[o].radius,-r),a.lineTo(e[o].radius,-r),a.lineTo(e[o-1].radius,0),a.lineTo(0,0),a.closePath(),a.fill(),!0==n.border&&a.stroke()}a.translate(0,-r)}return a.restore(),!1!==t.dataLabel&&1===o&&drawFunnelText(e,t,a,r,n.labelAlign,s,l),{center:l,radius:d,series:e}}function drawFunnelText(e,t,a,o,n,r,l){var s=Math.PI;for(let d=0;d<e.length;d++){let i,x,h,c,p=e[d],g=p.formatter?p.formatter(p,d,e):util.toFixed(100*p._proportion_)+"%";"right"==n?(i=0==d?(p.funnelArea[2]+l.x)/2:(p.funnelArea[2]+e[d-1].funnelArea[2])/2,x=i+2*r,h=p.funnelArea[1]+o/2,c=p.textSize*t.pix||t.fontSize*t.pix,a.setLineWidth(1*t.pix),a.setStrokeStyle(p.color),a.setFillStyle(p.color),a.beginPath(),a.moveTo(i,h),a.lineTo(x,h),a.stroke(),a.closePath(),a.beginPath(),a.moveTo(x,h),a.arc(x,h,2,0,2*s),a.closePath(),a.fill(),a.beginPath(),a.setFontSize(c),a.setFillStyle(p.textColor||t.fontColor),a.fillText(g,x+5,h+c/2-2),a.closePath(),a.stroke(),a.closePath()):(i=0==d?(p.funnelArea[0]+l.x)/2:(p.funnelArea[0]+e[d-1].funnelArea[0])/2,x=i-2*r,h=p.funnelArea[1]+o/2,c=p.textSize*t.pix||t.fontSize*t.pix,a.setLineWidth(1*t.pix),a.setStrokeStyle(p.color),a.setFillStyle(p.color),a.beginPath(),a.moveTo(i,h),a.lineTo(x,h),a.stroke(),a.closePath(),a.beginPath(),a.moveTo(x,h),a.arc(x,h,2,0,2*s),a.closePath(),a.fill(),a.beginPath(),a.setFontSize(c),a.setFillStyle(p.textColor||t.fontColor),a.fillText(g,x-5-measureText(g,c,a),h+c/2-2),a.closePath(),a.stroke(),a.closePath())}}function drawCanvas(e,t){t.draw()}var Timing={easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){var t=Math.pow;return 1>(e/=.5)?.5*t(e,3):.5*(t(e-2,3)+2)},linear:function(e){return e}};function Animation(e){this.isStop=!1,e.duration="undefined"==typeof e.duration?1e3:e.duration,e.timing=e.timing||"easeInOut";var t=function(){return"undefined"==typeof setTimeout?"undefined"==typeof requestAnimationFrame?function(e){e(null)}:requestAnimationFrame:function(e,t){setTimeout(function(){var t=+new Date;e(t)},t)}}(),i=null,a=function(o){if(null===o||!0===this.isStop)return e.onProcess&&e.onProcess(1),void(e.onAnimationFinish&&e.onAnimationFinish());if(null===i&&(i=o),o-i<e.duration){var n=(o-i)/e.duration,r=Timing[e.timing];n=r(n),e.onProcess&&e.onProcess(n),t(a,17)}else e.onProcess&&e.onProcess(1),e.onAnimationFinish&&e.onAnimationFinish()};a=a.bind(this),t(a,17)}Animation.prototype.stop=function(){this.isStop=!0};function drawCharts(e,t,a,i){var o=this,n=t.series;("pie"===e||"ring"===e||"rose"===e||"funnel"===e)&&(n=fixPieSeries(n,t,a));var r=t.categories;n=fillSeries(n,t,a);var l=t.animation?t.duration:0;o.animationInstance&&o.animationInstance.stop();var s=null;if("candle"==e){let e=assign({},t.extra.candle.average);e.show?(s=calCandleMA(e.day,e.name,e.color,n[0].data),s=fillSeries(s,t,a),t.seriesMA=s):t.seriesMA?s=t.seriesMA=fillSeries(t.seriesMA,t,a):s=n}else s=n;t._series_=n=filterSeries(n),t.area=[,,,,];for(let o=0;4>o;o++)t.area[o]=t.padding[o]*t.pix;var d=calLegendData(s,t,a,t.chartData,i),x=d.area.wholeHeight,h=d.area.wholeWidth;switch(t.legend.position){case"top":t.area[0]+=x;break;case"bottom":t.area[2]+=x;break;case"left":t.area[3]+=h;break;case"right":t.area[1]+=h;}let c={},p=0;if("line"===t.type||"column"===t.type||"area"===t.type||"mix"===t.type||"candle"===t.type){if(c=calYAxisData(n,t,a,i),p=c.yAxisWidth,t.yAxis.showTitle){let e=0;for(let o=0;o<t.yAxis.data.length;o++)e=Math.max(e,t.yAxis.data[o].titleFontSize?t.yAxis.data[o].titleFontSize:a.fontSize);t.area[0]+=(e+6)*t.pix}let e=0,o=0;for(let a=0;a<p.length;a++)"left"==p[a].position?(t.area[3]+=0<o?p[a].width+t.yAxis.padding*t.pix:p[a].width,o+=1):(t.area[1]+=0<e?p[a].width+t.yAxis.padding*t.pix:p[a].width,e+=1)}else a.yAxisWidth=p;if(t.chartData.yAxisData=c,t.categories&&t.categories.length&&"radar"!==t.type&&"gauge"!==t.type){t.chartData.xAxisData=getXAxisPoints(t.categories,t,a);let e=calCategoriesData(t.categories,t,a,t.chartData.xAxisData.eachSpacing,i),o=e.xAxisHeight,n=e.angle;a.xAxisHeight=o,a._xAxisTextAngle_=n,t.area[2]+=o,t.chartData.categoriesData=e}else if("line"===t.type||"area"===t.type||"points"===t.type){t.chartData.xAxisData=calXAxisData(n,t,a,i),r=t.chartData.xAxisData.rangesFormat;let e=calCategoriesData(r,t,a,t.chartData.xAxisData.eachSpacing,i),o=e.xAxisHeight,l=e.angle;a.xAxisHeight=o,a._xAxisTextAngle_=l,t.area[2]+=o,t.chartData.categoriesData=e}else t.chartData.xAxisData={xAxisPoints:[]};if(t.enableScroll&&"right"==t.xAxis.scrollAlign&&void 0===t._scrollDistance_){let e=0,i=t.chartData.xAxisData.xAxisPoints,a=t.chartData.xAxisData.startX,n=t.chartData.xAxisData.endX,r=t.chartData.xAxisData.eachSpacing,l=r*(i.length-1);e=n-a-l,o.scrollOption={currentOffset:e,startTouchX:e,distance:0,lastMoveTime:0},t._scrollDistance_=e}("pie"===e||"ring"===e||"rose"===e)&&(a._pieTextMaxLength_=!1===t.dataLabel?0:getPieTextMaxLength(s,a,i)),"word"===e?this.animationInstance=new Animation({timing:t.timing,duration:l,onProcess:function(e){i.clearRect(0,0,t.width,t.height),t.rotate&&contextRotate(i,t),drawWordCloudDataPoints(n,t,a,i,e),drawCanvas(t,i)},onAnimationFinish:function(){o.uevent.trigger("renderComplete")}}):"map"===e?(i.clearRect(0,0,t.width,t.height),drawMapDataPoints(n,t,a,i)):"funnel"===e?this.animationInstance=new Animation({timing:t.timing,duration:l,onProcess:function(e){i.clearRect(0,0,t.width,t.height),t.rotate&&contextRotate(i,t),t.chartData.funnelData=drawFunnelDataPoints(n,t,a,i,e),drawLegend(t.series,t,a,i,t.chartData),drawToolTipBridge(t,a,i,e),drawCanvas(t,i)},onAnimationFinish:function(){o.uevent.trigger("renderComplete")}}):"line"===e?this.animationInstance=new Animation({timing:t.timing,duration:l,onProcess:function(e){i.clearRect(0,0,t.width,t.height),t.rotate&&contextRotate(i,t),drawYAxisGrid(r,t,a,i),drawXAxis(r,t,a,i);var o=drawLineDataPoints(n,t,a,i,e),l=o.xAxisPoints,s=o.calPoints,d=o.eachSpacing;t.chartData.xAxisPoints=l,t.chartData.calPoints=s,t.chartData.eachSpacing=d,drawYAxis(n,t,a,i),!1!==t.enableMarkLine&&1===e&&drawMarkLine(t,a,i),drawLegend(t.series,t,a,i,t.chartData),drawToolTipBridge(t,a,i,e,d,l),drawCanvas(t,i)},onAnimationFinish:function(){o.uevent.trigger("renderComplete")}}):"mix"===e?this.animationInstance=new Animation({timing:t.timing,duration:l,onProcess:function(e){i.clearRect(0,0,t.width,t.height),t.rotate&&contextRotate(i,t),drawYAxisGrid(r,t,a,i),drawXAxis(r,t,a,i);var o=drawMixDataPoints(n,t,a,i,e),l=o.xAxisPoints,s=o.calPoints,d=o.eachSpacing;t.chartData.xAxisPoints=l,t.chartData.calPoints=s,t.chartData.eachSpacing=d,drawYAxis(n,t,a,i),!1!==t.enableMarkLine&&1===e&&drawMarkLine(t,a,i),drawLegend(t.series,t,a,i,t.chartData),drawToolTipBridge(t,a,i,e,d,l),drawCanvas(t,i)},onAnimationFinish:function(){o.uevent.trigger("renderComplete")}}):"column"===e?this.animationInstance=new Animation({timing:t.timing,duration:l,onProcess:function(e){i.clearRect(0,0,t.width,t.height),t.rotate&&contextRotate(i,t),drawYAxisGrid(r,t,a,i),drawXAxis(r,t,a,i);var o=drawColumnDataPoints(n,t,a,i,e),l=o.xAxisPoints,s=o.calPoints,d=o.eachSpacing;t.chartData.xAxisPoints=l,t.chartData.calPoints=s,t.chartData.eachSpacing=d,drawYAxis(n,t,a,i),!1!==t.enableMarkLine&&1===e&&drawMarkLine(t,a,i),drawLegend(t.series,t,a,i,t.chartData),drawToolTipBridge(t,a,i,e,d,l),drawCanvas(t,i)},onAnimationFinish:function(){o.uevent.trigger("renderComplete")}}):"area"===e?this.animationInstance=new Animation({timing:t.timing,duration:l,onProcess:function(e){i.clearRect(0,0,t.width,t.height),t.rotate&&contextRotate(i,t),drawYAxisGrid(r,t,a,i),drawXAxis(r,t,a,i);var o=drawAreaDataPoints(n,t,a,i,e),l=o.xAxisPoints,s=o.calPoints,d=o.eachSpacing;t.chartData.xAxisPoints=l,t.chartData.calPoints=s,t.chartData.eachSpacing=d,drawYAxis(n,t,a,i),!1!==t.enableMarkLine&&1===e&&drawMarkLine(t,a,i),drawLegend(t.series,t,a,i,t.chartData),drawToolTipBridge(t,a,i,e,d,l),drawCanvas(t,i)},onAnimationFinish:function(){o.uevent.trigger("renderComplete")}}):"ring"===e||"pie"===e?this.animationInstance=new Animation({timing:t.timing,duration:l,onProcess:function(e){i.clearRect(0,0,t.width,t.height),t.rotate&&contextRotate(i,t),t.chartData.pieData=drawPieDataPoints(n,t,a,i,e),drawLegend(t.series,t,a,i,t.chartData),drawToolTipBridge(t,a,i,e),drawCanvas(t,i)},onAnimationFinish:function(){o.uevent.trigger("renderComplete")}}):"rose"===e?this.animationInstance=new Animation({timing:t.timing,duration:l,onProcess:function(e){i.clearRect(0,0,t.width,t.height),t.rotate&&contextRotate(i,t),t.chartData.pieData=drawRoseDataPoints(n,t,a,i,e),drawLegend(t.series,t,a,i,t.chartData),drawToolTipBridge(t,a,i,e),drawCanvas(t,i)},onAnimationFinish:function(){o.uevent.trigger("renderComplete")}}):"radar"===e?this.animationInstance=new Animation({timing:t.timing,duration:l,onProcess:function(e){i.clearRect(0,0,t.width,t.height),t.rotate&&contextRotate(i,t),t.chartData.radarData=drawRadarDataPoints(n,t,a,i,e),drawLegend(t.series,t,a,i,t.chartData),drawToolTipBridge(t,a,i,e),drawCanvas(t,i)},onAnimationFinish:function(){o.uevent.trigger("renderComplete")}}):"arcbar"===e?this.animationInstance=new Animation({timing:t.timing,duration:l,onProcess:function(e){i.clearRect(0,0,t.width,t.height),t.rotate&&contextRotate(i,t),t.chartData.arcbarData=drawArcbarDataPoints(n,t,a,i,e),drawCanvas(t,i)},onAnimationFinish:function(){o.uevent.trigger("renderComplete")}}):"gauge"===e?this.animationInstance=new Animation({timing:t.timing,duration:l,onProcess:function(e){i.clearRect(0,0,t.width,t.height),t.rotate&&contextRotate(i,t),t.chartData.gaugeData=drawGaugeDataPoints(r,n,t,a,i,e),drawCanvas(t,i)},onAnimationFinish:function(){o.uevent.trigger("renderComplete")}}):"candle"===e?this.animationInstance=new Animation({timing:t.timing,duration:l,onProcess:function(e){i.clearRect(0,0,t.width,t.height),t.rotate&&contextRotate(i,t),drawYAxisGrid(r,t,a,i),drawXAxis(r,t,a,i);var o=drawCandleDataPoints(n,s,t,a,i,e),l=o.xAxisPoints,d=o.calPoints,x=o.eachSpacing;t.chartData.xAxisPoints=l,t.chartData.calPoints=d,t.chartData.eachSpacing=x,drawYAxis(n,t,a,i),!1!==t.enableMarkLine&&1===e&&drawMarkLine(t,a,i),s?drawLegend(s,t,a,i,t.chartData):drawLegend(t.series,t,a,i,t.chartData),drawToolTipBridge(t,a,i,e,x,l),drawCanvas(t,i)},onAnimationFinish:function(){o.uevent.trigger("renderComplete")}}):void 0}function uChartsEvent(){this.events={}}uChartsEvent.prototype.addEventListener=function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},uChartsEvent.prototype.delEventListener=function(e){this.events[e]=[]},uChartsEvent.prototype.trigger=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=t[0],o=t.slice(1);!this.events[a]||this.events[a].forEach(function(e){try{e.apply(null,o)}catch(t){}})};var uCharts=function(e){e.pix=e.pixelRatio?e.pixelRatio:1,e.fontSize=e.fontSize?e.fontSize:13,e.fontColor=e.fontColor?e.fontColor:config.fontColor,(""==e.background||"none"==e.background)&&(e.background="#FFFFFF"),e.title=assign({},e.title),e.subtitle=assign({},e.subtitle),e.duration=e.duration?e.duration:1e3,e.yAxis=assign({},{data:[],showTitle:!1,disabled:!1,disableGrid:!1,splitNumber:5,gridType:"solid",dashLength:4*e.pix,gridColor:"#cccccc",padding:10,fontColor:"#666666"},e.yAxis),e.xAxis=assign({},{rotateLabel:!1,type:"calibration",gridType:"solid",dashLength:4,scrollAlign:"left",boundaryGap:"center",axisLine:!0,axisLineColor:"#cccccc"},e.xAxis),e.xAxis.scrollPosition=e.xAxis.scrollAlign,e.legend=assign({},{show:!0,position:"bottom",float:"center",backgroundColor:"rgba(0,0,0,0)",borderColor:"rgba(0,0,0,0)",borderWidth:0,padding:5,margin:5,itemGap:10,fontSize:e.fontSize,lineHeight:e.fontSize,fontColor:"#333333",format:{},hiddenColor:"#CECECE"},e.legend),e.extra=assign({},e.extra),e.rotate=!!e.rotate,e.animation=!!e.animation,e.rotate=!!e.rotate,e.canvas2d=!!e.canvas2d;let t=JSON.parse(JSON.stringify(config));if(t.color=e.color?e.color:t.color,t.yAxisTitleWidth=!0!==e.yAxis.disabled&&e.yAxis.title?t.yAxisTitleWidth:0,"pie"==e.type&&(t.pieChartLinePadding=!1===e.dataLabel?0:e.extra.pie.labelWidth*e.pix||t.pieChartLinePadding*e.pix),"ring"==e.type&&(t.pieChartLinePadding=!1===e.dataLabel?0:e.extra.ring.labelWidth*e.pix||t.pieChartLinePadding*e.pix),"rose"==e.type&&(t.pieChartLinePadding=!1===e.dataLabel?0:e.extra.rose.labelWidth*e.pix||t.pieChartLinePadding*e.pix),t.pieChartTextPadding=!1===e.dataLabel?0:t.pieChartTextPadding*e.pix,t.yAxisSplit=e.yAxis.splitNumber?e.yAxis.splitNumber:config.yAxisSplit,t.rotate=e.rotate,e.rotate){let t=e.width,i=e.height;e.width=i,e.height=t}if(e.padding=e.padding?e.padding:t.padding,t.yAxisWidth=config.yAxisWidth*e.pix,t.xAxisHeight=config.xAxisHeight*e.pix,e.enableScroll&&e.xAxis.scrollShow&&(t.xAxisHeight+=6*e.pix),t.xAxisLineHeight=config.xAxisLineHeight*e.pix,t.fontSize=e.fontSize*e.pix,t.titleFontSize=config.titleFontSize*e.pix,t.subtitleFontSize=config.subtitleFontSize*e.pix,t.toolTipPadding=config.toolTipPadding*e.pix,t.toolTipLineHeight=config.toolTipLineHeight*e.pix,t.columePadding=config.columePadding*e.pix,!e.context)throw new Error("[uCharts] \u672A\u83B7\u53D6\u5230context\uFF01\u6CE8\u610F\uFF1Av2.0\u7248\u672C\u540E\uFF0C\u9700\u8981\u81EA\u884C\u83B7\u53D6canvas\u7684\u7ED8\u56FE\u4E0A\u4E0B\u6587\u5E76\u4F20\u5165opts.context\uFF01");this.context=e.context,this.context.setTextAlign||(this.context.setStrokeStyle=function(t){return this.strokeStyle=t},this.context.setLineWidth=function(t){return this.lineWidth=t},this.context.setLineCap=function(t){return this.lineCap=t},this.context.setFontSize=function(t){return this.font=t+"px sans-serif"},this.context.setFillStyle=function(t){return this.fillStyle=t},this.context.setTextAlign=function(t){return this.textAlign=t},this.context.draw=function(){}),e.chartData={},this.uevent=new uChartsEvent,this.scrollOption={currentOffset:0,startTouchX:0,distance:0,lastMoveTime:0},this.opts=e,this.config=t,drawCharts.call(this,e.type,e,t,this.context)};uCharts.prototype.updateData=function(){let e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this.opts=assign({},this.opts,e),this.opts.updateData=!0;let t=e.scrollPosition||"current";switch(t){case"current":this.opts._scrollDistance_=this.scrollOption.currentOffset;break;case"left":this.opts._scrollDistance_=0,this.scrollOption={currentOffset:0,startTouchX:0,distance:0,lastMoveTime:0};break;case"right":let e=calYAxisData(this.opts.series,this.opts,this.config,this.context),i=e.yAxisWidth;this.config.yAxisWidth=i;let a=0,o=getXAxisPoints(this.opts.categories,this.opts,this.config),n=o.xAxisPoints,r=o.startX,l=o.endX,s=o.eachSpacing,d=s*(n.length-1);a=l-r-d,this.scrollOption={currentOffset:a,startTouchX:a,distance:0,lastMoveTime:0},this.opts._scrollDistance_=a;}drawCharts.call(this,this.opts.type,this.opts,this.config,this.context)},uCharts.prototype.zoom=function(){var e=Math.round,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.opts.xAxis.itemCount;if(!0!==this.opts.enableScroll)return void console.log("[uCharts] \u8BF7\u542F\u7528\u6EDA\u52A8\u6761\u540E\u4F7F\u7528");let i=e(Math.abs(this.scrollOption.currentOffset)/this.opts.chartData.eachSpacing)+e(this.opts.xAxis.itemCount/2);this.opts.animation=!1,this.opts.xAxis.itemCount=t.itemCount;let a=calYAxisData(this.opts.series,this.opts,this.config,this.context),o=a.yAxisWidth;this.config.yAxisWidth=o;let n=0,r=getXAxisPoints(this.opts.categories,this.opts,this.config),l=r.xAxisPoints,s=r.startX,d=r.endX,x=r.eachSpacing,h=d-s,c=h-x*(l.length-1);n=h/2-x*i,0<n&&(n=0),n<c&&(n=c),this.scrollOption={currentOffset:n,startTouchX:n,distance:0,lastMoveTime:0},this.opts._scrollDistance_=n,drawCharts.call(this,this.opts.type,this.opts,this.config,this.context)},uCharts.prototype.stopAnimation=function(){this.animationInstance&&this.animationInstance.stop()},uCharts.prototype.addEventListener=function(e,t){this.uevent.addEventListener(e,t)},uCharts.prototype.delEventListener=function(e){this.uevent.delEventListener(e)},uCharts.prototype.getCurrentDataIndex=function(t){var e=null;if(e=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],e){let i=getTouches(e,this.opts,t);return"pie"===this.opts.type||"ring"===this.opts.type||"rose"===this.opts.type?findPieChartCurrentIndex({x:i.x,y:i.y},this.opts.chartData.pieData):"radar"===this.opts.type?findRadarChartCurrentIndex({x:i.x,y:i.y},this.opts.chartData.radarData,this.opts.categories.length):"funnel"===this.opts.type?findFunnelChartCurrentIndex({x:i.x,y:i.y},this.opts.chartData.funnelData):"map"===this.opts.type?findMapChartCurrentIndex({x:i.x,y:i.y},this.opts):"word"===this.opts.type?findWordChartCurrentIndex({x:i.x,y:i.y},this.opts.chartData.wordCloudData):findCurrentIndex({x:i.x,y:i.y},this.opts.chartData.calPoints,this.opts,this.config,Math.abs(this.scrollOption.currentOffset))}return-1},uCharts.prototype.getLegendDataIndex=function(t){var e=null;if(e=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],e){let i=getTouches(e,this.opts,t);return findLegendIndex({x:i.x,y:i.y},this.opts.chartData.legendData)}return-1},uCharts.prototype.touchLegend=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=null;if(i=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],i){var a=getTouches(i,this.opts,t),o=this.getLegendDataIndex(t);0<=o&&("candle"==this.opts.type?this.opts.seriesMA[o].show=!this.opts.seriesMA[o].show:this.opts.series[o].show=!this.opts.series[o].show,this.opts.animation=!!e.animation,this.opts._scrollDistance_=this.scrollOption.currentOffset,drawCharts.call(this,this.opts.type,this.opts,this.config,this.context))}},uCharts.prototype.showToolTip=function(t){var e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},i=null;i=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],i||console.log("[uCharts] \u672A\u83B7\u53D6\u5230event\u5750\u6807\u4FE1\u606F");var a=getTouches(i,this.opts,t),o=this.scrollOption.currentOffset,n=assign({},this.opts,{_scrollDistance_:o,animation:!1});if("line"===this.opts.type||"area"===this.opts.type||"column"===this.opts.type){var r=e.index==null?this.getCurrentDataIndex(t):e.index;if(-1<r){var l=getSeriesDataItem(this.opts.series,r);if(0!==l.length){var s=getToolTipData(l,this.opts,r,this.opts.categories,e),d=s.textList,x=s.offset;x.y=a.y,n.tooltip={textList:e.textList===void 0?d:e.textList,offset:e.offset===void 0?x:e.offset,option:e,index:r}}}drawCharts.call(this,n.type,n,this.config,this.context)}if("mix"===this.opts.type){var r=null==e.index?this.getCurrentDataIndex(t):e.index;if(-1<r){var o=this.scrollOption.currentOffset,n=assign({},this.opts,{_scrollDistance_:o,animation:!1}),l=getSeriesDataItem(this.opts.series,r);if(0!==l.length){var h=getMixToolTipData(l,this.opts,r,this.opts.categories,e),d=h.textList,x=h.offset;x.y=a.y,n.tooltip={textList:e.textList?e.textList:d,offset:void 0===e.offset?x:e.offset,option:e,index:r}}}drawCharts.call(this,n.type,n,this.config,this.context)}if("candle"===this.opts.type){var r=null==e.index?this.getCurrentDataIndex(t):e.index;if(-1<r){var o=this.scrollOption.currentOffset,n=assign({},this.opts,{_scrollDistance_:o,animation:!1}),l=getSeriesDataItem(this.opts.series,r);if(0!==l.length){var s=getCandleToolTipData(this.opts.series[0].data,l,this.opts,r,this.opts.categories,this.opts.extra.candle,e),d=s.textList,x=s.offset;x.y=a.y,n.tooltip={textList:e.textList?e.textList:d,offset:void 0===e.offset?x:e.offset,option:e,index:r}}}drawCharts.call(this,n.type,n,this.config,this.context)}if("pie"===this.opts.type||"ring"===this.opts.type||"rose"===this.opts.type||"funnel"===this.opts.type){var r=null==e.index?this.getCurrentDataIndex(t):e.index;if(-1<r){var n=assign({},this.opts,{animation:!1}),l=this.opts._series_[r],d=[{text:e.formatter?e.formatter(l,void 0,r,n):l.name+": "+l.data,color:l.color}],x={x:a.x,y:a.y};n.tooltip={textList:e.textList?e.textList:d,offset:void 0===e.offset?x:e.offset,option:e,index:r}}drawCharts.call(this,n.type,n,this.config,this.context)}if("map"===this.opts.type){var r=null==e.index?this.getCurrentDataIndex(t):e.index;if(-1<r){var n=assign({},this.opts,{animation:!1}),l=this.opts._series_[r];l.name=l.properties.name;var d=[{text:e.formatter?e.formatter(l,void 0,r,this.opts):l.name,color:l.color}],x={x:a.x,y:a.y};n.tooltip={textList:e.textList?e.textList:d,offset:void 0===e.offset?x:e.offset,option:e,index:r}}n.updateData=!1,drawCharts.call(this,n.type,n,this.config,this.context)}if("word"===this.opts.type){var r=null==e.index?this.getCurrentDataIndex(t):e.index;if(-1<r){var n=assign({},this.opts,{animation:!1}),l=this.opts._series_[r],d=[{text:e.formatter?e.formatter(l,void 0,r,this.opts):l.name,color:l.color}],x={x:a.x,y:a.y};n.tooltip={textList:e.textList?e.textList:d,offset:void 0===e.offset?x:e.offset,option:e,index:r}}n.updateData=!1,drawCharts.call(this,n.type,n,this.config,this.context)}if("radar"===this.opts.type){var r=null==e.index?this.getCurrentDataIndex(t):e.index;if(-1<r){var n=assign({},this.opts,{animation:!1}),l=getSeriesDataItem(this.opts.series,r);if(0!==l.length){var d=l.map(t=>({text:e.formatter?e.formatter(t,this.opts.categories[r],r,this.opts):t.name+": "+t.data,color:t.color})),x={x:a.x,y:a.y};n.tooltip={textList:e.textList?e.textList:d,offset:void 0===e.offset?x:e.offset,option:e,index:r}}}drawCharts.call(this,n.type,n,this.config,this.context)}},uCharts.prototype.translate=function(e){this.scrollOption={currentOffset:e,startTouchX:e,distance:0,lastMoveTime:0};let t=assign({},this.opts,{_scrollDistance_:e,animation:!1});drawCharts.call(this,this.opts.type,t,this.config,this.context)},uCharts.prototype.scrollStart=function(t){var e=null;e=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0];var i=getTouches(e,this.opts,t);e&&!0===this.opts.enableScroll&&(this.scrollOption.startTouchX=i.x)},uCharts.prototype.scroll=function(t){0===this.scrollOption.lastMoveTime&&(this.scrollOption.lastMoveTime=Date.now());let e=this.opts.touchMoveLimit||60,i=Date.now(),a=i-this.scrollOption.lastMoveTime;if(!(a<Math.floor(1e3/e))){this.scrollOption.lastMoveTime=i;var o=null;if(o=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],o&&!0===this.opts.enableScroll){var n,r=getTouches(o,this.opts,t);n=r.x-this.scrollOption.startTouchX;var l=this.scrollOption.currentOffset,s=calValidDistance(this,l+n,this.opts.chartData,this.config,this.opts);this.scrollOption.distance=n=s-l;var d=assign({},this.opts,{_scrollDistance_:l+n,animation:!1});return drawCharts.call(this,d.type,d,this.config,this.context),l+n}}},uCharts.prototype.scrollEnd=function(){if(!0===this.opts.enableScroll){var e=this.scrollOption,t=e.currentOffset,i=e.distance;this.scrollOption.currentOffset=t+i,this.scrollOption.distance=0}},"object"==typeof module&&"object"==typeof module.exports&&(module.exports=uCharts);